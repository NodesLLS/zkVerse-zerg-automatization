(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},i=n.parcelRequire1d24;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},n.parcelRequire1d24=i),i.register("hM5LD",(function(t,n){e(t.exports,"createExploreHooks",(function(){return i("7i964").createExploreHooks})),e(t.exports,"ExploreProvider",(function(){return i("aAtpt").ExploreProvider})),e(t.exports,"useExplore",(function(){return i("aAtpt").useExplore})),e(t.exports,"ExploreAnalytics",(function(){return i("5MRwA").ExploreAnalytics})),e(t.exports,"EXPLORE_BASE_QUERY_KEY",(function(){return i("hSXsO").EXPLORE_BASE_QUERY_KEY})),e(t.exports,"FUSE_EXPLORE_DAPPS_CONFIG",(function(){return i("gjBV4").FUSE_EXPLORE_DAPPS_CONFIG}));i("7i964"),i("aAtpt"),i("5MRwA"),i("hSXsO"),i("gjBV4"),i("ggjh9")})),i.register("7i964",(function(t,n){e(t.exports,"createExploreHooks",(function(){return h}));var r=i("lFxNk"),o=i("2gAtf"),s=i("hkdDJ"),a=i("1z5C9"),u=i("9A7Xn"),c=i("96Goz"),l=i("5FhX9"),d=i("7YRkB"),p=i("9HxvY"),f=i("iH1mQ");function h(e,t,n,i,h,y){return{useExploreSites:()=>(0,p.useSites)(e,t(),n,i,h,y),useExploreTokens:()=>(0,f.useTokens)(e,t(),n,i,h,y),useExploreCollections:()=>(0,r.useCollections)(e,t(),n,i,h,y),useExploreRecommendedCollections:()=>(0,u.useRecommendedCollections)(t(),n,i,h,y),useExploreRecommendedSites:()=>(0,l.useRecommendedSites)(t(),n,i,h,y),useExploreRecommendedTokens:()=>(0,d.useRecommendedTokens)(t(),n,i,h,y),useLearn:()=>(0,a.useLearn)(t(),n,i,y),useExploreLoadAllQueries:()=>(0,s.useExploreLoadAllQueries)(e,t(),n,i,h,y),useRecommendedSearchSites:c.useRecommendedSearchSites,useExploreSortOption:()=>(0,o.useExploreSortOption)(e),useExploreSelectedNetwork:()=>(0,o.useExploreSelectedNetwork)(e,i,y)}}})),i.register("lFxNk",(function(t,n){e(t.exports,"useCollections",(function(){return f}));var r=i("4xbAj"),o=i("43063"),s=i("RVqnc"),a=i("5ekp2"),u=i("10kLD"),c=i("aAtpt"),l=i("1vyom"),d=i("hSXsO"),p=i("2gAtf");const f=(e,t,n,i,f,h)=>{var y;const{platform:m,appVersion:g}=(0,c.useExplore)(),{networkIds:v}=(0,p.useExploreSelectedNetwork)(e,i,h),{data:S}=n.useSelectedMultiChainAccount(),{data:b=[]}=n.useAllMultiChainAccounts(),{data:w,isLoading:E}=(0,p.useExploreSortCollections)(e),x=null!==(y=(0,u.getSupportedLanguageValue)(o.i18next.language))&&void 0!==y?y:"en";return(0,a.useQuery)({queryKey:d.exploreQueryKeys.collections(w,v,g,x),enabled:!E&&b.length>0&&S&&S.type!==r.AccountType.ReadOnly,queryFn:()=>{if(!S)throw new Error("No account found");return(0,l.getCollections)(w,v,t,g,x,m,S,f)},keepPreviousData:!0,cacheTime:(0,s.toMilliseconds)({minutes:10})})}})),i.register("aAtpt",(function(n,r){e(n.exports,"useExplore",(function(){return a})),e(n.exports,"ExploreProvider",(function(){return u}));var o=i("29o0l");const s=(0,o.createContext)(void 0);function a(){const e=(0,o.useContext)(s);if(!e)throw new Error("useExplore must be used within a ExploreProvider");return e}function u({children:e,platform:n,appVersion:r,initialTabIndex:i=0}){const[a,u]=t(o).useState(i),c={platform:n,appVersion:r,activeTab:a,setActiveTab:u};return t(o).createElement(s.Provider,{value:c},e)}})),i.register("1vyom",(function(t,n){e(t.exports,"getCollections",(function(){return u}),(function(e){return u=e}));var r=i("4xbAj"),o=i("iOvk1"),s=i("beWYh"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t,n,i,u,c,l,d)=>a(void 0,void 0,void 0,(function*(){var a,p;const f=null!==(a=null==l?void 0:l.addresses.map(o.chainAddressToCaip19Address))&&void 0!==a?a:[],h=(null==l?void 0:l.type)===r.AccountType.Seed?l.seedIdentifier:null,y=null!==(p=null==l?void 0:l.identifier)&&void 0!==p?p:"",m={appVersion:i,locale:u,platform:c,limit:10,timeframe:"24h",rankBy:"top"===e?"volume":e,chainIds:t,accountId:y,deviceId:d,rootId:h,selectedAccountAddresses:f},g=`${n}/explore/v1/trending-collections`,v=new(0,s.RequestClient);v.withDefaultHeaders({"Content-Type":"application/json"});const S=yield v.post(g,m);if(!(0,s.responseIsOkay)(S))throw new Error("Failed to fetch collections");const b=S.data;return Object.assign(Object.assign({},b),{data:b.data.filter((e=>e.floorPrices.length>0&&e.marketplacePages.length>0))})}))})),i.register("hSXsO",(function(t,n){e(t.exports,"EXPLORE_BASE_QUERY_KEY",(function(){return r})),e(t.exports,"exploreQueryKeys",(function(){return o}));const r="@phantom/explore",o={sites:(e,t,n,o)=>[`${r}:sites`,n,o,e,t],recommendedSites:(e,t,n)=>[`${r}:sites`,"recommended",e,n,t],tokens:(e,t,n,o)=>[`${r}:tokens`,n,o,e,t],recommendedTokens:(e,t,n)=>[`${r}:tokens`,"recommended",e,n,t],collections:(e,t,n,o)=>[`${r}:collections`,n,o,e,t],recommendedCollections:(e,t,n)=>[`${r}:collections`,"recommended",e,n,t],learn:(e,t,n)=>[`${r}:learn`,e,n,t],exploreSortSites:[`${r}:sort:sites`],exploreSortCollections:[`${r}:sort:collections`],exploreSortTokens:[`${r}:sort:tokens`],exploreSelectedNetwork:e=>[`${r}:selected:network`,e]}})),i.register("2gAtf",(function(t,n){e(t.exports,"useExploreSortSites",(function(){return y}),(function(e){return y=e})),e(t.exports,"useExploreSortCollections",(function(){return m}),(function(e){return m=e})),e(t.exports,"useExploreSortTokens",(function(){return g}),(function(e){return g=e})),e(t.exports,"useExploreSelectedNetwork",(function(){return v}),(function(e){return v=e})),e(t.exports,"useExploreSortOption",(function(){return S}),(function(e){return S=e}));var r=i("iOvk1"),o=i("HlEsU"),s=i("9W7fs"),a=i("5ekp2"),u=i("7dHjq"),c=i("hSXsO"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const d=o.StorageKeys.ExploreFilters,p={currentNetwork:"all_networks",sortSites:"trending",sortCollections:"trending",sortTokens:"volume"};function f(e){return l(this,void 0,void 0,(function*(){const t=yield e.get(d);return null!=t?t:p}))}function h(e,t){return l(this,void 0,void 0,(function*(){yield e.set(d,t)}))}function y(e){const t=(0,u.useQueryClient)(),{data:n,isLoading:r}=(0,a.useQuery)({queryKey:c.exploreQueryKeys.exploreSortSites,refetchOnMount:"always",queryFn(){return l(this,void 0,void 0,(function*(){return(yield f(e)).sortSites}))}}),{mutate:o}=(0,s.useMutation)({mutationFn(t){return l(this,void 0,void 0,(function*(){const n=yield f(e);yield h(e,Object.assign(Object.assign({},n),{sortSites:t}))}))},onSuccess(){return l(this,void 0,void 0,(function*(){yield t.invalidateQueries(c.exploreQueryKeys.exploreSortSites)}))}});return{data:null!=n?n:p.sortSites,isLoading:r&&!n,mutate:o}}function m(e){const t=(0,u.useQueryClient)(),{data:n,isLoading:r}=(0,a.useQuery)({queryKey:c.exploreQueryKeys.exploreSortCollections,refetchOnMount:"always",queryFn(){return l(this,void 0,void 0,(function*(){return(yield f(e)).sortCollections}))}}),{mutate:o}=(0,s.useMutation)({mutationFn(t){return l(this,void 0,void 0,(function*(){const n=yield f(e);yield h(e,Object.assign(Object.assign({},n),{sortCollections:t}))}))},onSuccess(){return l(this,void 0,void 0,(function*(){yield t.invalidateQueries(c.exploreQueryKeys.exploreSortCollections)}))}});return{data:null!=n?n:p.sortCollections,isLoading:r&&!n,mutate:o}}function g(e){const t=(0,u.useQueryClient)(),{data:n,isLoading:r}=(0,a.useQuery)({queryKey:c.exploreQueryKeys.exploreSortTokens,refetchOnMount:"always",queryFn(){return l(this,void 0,void 0,(function*(){return(yield f(e)).sortTokens}))}}),{mutate:o}=(0,s.useMutation)({mutationFn(t){return l(this,void 0,void 0,(function*(){const n=yield f(e);yield h(e,Object.assign(Object.assign({},n),{sortTokens:t}))}))},onSuccess(){return l(this,void 0,void 0,(function*(){yield t.invalidateQueries(c.exploreQueryKeys.exploreSortTokens)}))}});return{data:null!=n?n:p.sortTokens,isLoading:r&&!n,mutate:o}}function v(e,t,n){const o=(0,u.useQueryClient)(),i=t.useEnabledNetworkIDs().filter((e=>e!==r.BitcoinNetworkID.Mainnet||n())),{data:d,isLoading:y}=(0,a.useQuery)({queryKey:c.exploreQueryKeys.exploreSelectedNetwork(i),refetchOnMount:"always",queryFn(){return l(this,void 0,void 0,(function*(){return(yield f(e)).currentNetwork}))}}),{mutate:m}=(0,s.useMutation)({mutationFn(t){return l(this,void 0,void 0,(function*(){const n=yield f(e);yield h(e,Object.assign(Object.assign({},n),{currentNetwork:t}))}))},onSuccess(){return l(this,void 0,void 0,(function*(){yield o.invalidateQueries(c.exploreQueryKeys.exploreSelectedNetwork(i))}))}}),g=null!=d?d:p.currentNetwork,v="all_networks"===g||i.includes(g)?g:"all_networks";return{data:v,isLoading:y&&!d,networkIds:"all_networks"===v?i:[v],mutate:m}}function S(e){const{data:t,isLoading:n,mutate:r}=y(e),{data:o,isLoading:i,mutate:s}=g(e),{data:a,isLoading:u,mutate:c}=m(e);return{currentSortOption:e=>{switch(e){case"sites":return t;case"collections":return a;case"tokens":return o;default:return"trending"}},getSortOptions:e=>{switch(e){case"sites":case"collections":return["trending","top"];case"tokens":return["gainers","losers","volume","market_cap"];default:return[]}},setSortOption:(e,t)=>{"sites"===e?r(t):"collections"===e?c(t):"tokens"===e&&s(t)},isLoading:n||i||u}}})),i.register("hkdDJ",(function(t,n){e(t.exports,"useExploreLoadAllQueries",(function(){return y}));var r=i("4xbAj"),o=i("43063"),s=i("RVqnc"),a=i("5ekp2"),u=i("10kLD"),c=i("aAtpt"),l=i("1vyom"),d=i("9d4Nm"),p=i("2dXn0"),f=i("hSXsO"),h=i("2gAtf");const y=(e,t,n,i,y,m)=>{var g;const{platform:v,appVersion:S}=(0,c.useExplore)(),{networkIds:b}=(0,h.useExploreSelectedNetwork)(e,i,m),{data:w}=n.useSelectedMultiChainAccount(),{data:E=[]}=n.useAllMultiChainAccounts(),x=null!==(g=(0,u.getSupportedLanguageValue)(o.i18next.language))&&void 0!==g?g:"en",A=E.length>0&&w&&w.type!==r.AccountType.ReadOnly;return{sitesSortByTop:(0,a.useQuery)({queryKey:f.exploreQueryKeys.sites("top",b,S,x),enabled:A,queryFn:()=>{if(!w)throw new Error("No account found");return(0,d.getSites)("top",b,t,S,x,v,w,y)},keepPreviousData:!0,cacheTime:(0,s.toMilliseconds)({minutes:10})}),sitesSortByTrending:(0,a.useQuery)({queryKey:f.exploreQueryKeys.sites("trending",b,S,x),enabled:A,queryFn:()=>{if(!w)throw new Error("No account found");return(0,d.getSites)("trending",b,t,S,x,v,w,y)},keepPreviousData:!0,cacheTime:(0,s.toMilliseconds)({minutes:10})}),collectionSortByTrending:(0,a.useQuery)({queryKey:f.exploreQueryKeys.collections("trending",b,S,x),enabled:A,queryFn:()=>{if(!w)throw new Error("No account found");return(0,l.getCollections)("trending",b,t,S,x,v,w,y)},keepPreviousData:!0,cacheTime:(0,s.toMilliseconds)({minutes:10})}),collectionSortByTop:(0,a.useQuery)({queryKey:f.exploreQueryKeys.collections("top",b,S,x),enabled:A,queryFn:()=>{if(!w)throw new Error("No account found");return(0,l.getCollections)("top",b,t,S,x,v,w,y)},keepPreviousData:!0,cacheTime:(0,s.toMilliseconds)({minutes:10})}),tokensSortByGainers:(0,a.useQuery)({queryKey:f.exploreQueryKeys.tokens("gainers",b,S,x),enabled:A,queryFn:()=>{if(!w)throw new Error("No account found");return(0,p.getTokens)("gainers",b,t,S,x,v,w,y)},keepPreviousData:!0,cacheTime:(0,s.toMilliseconds)({minutes:10})}),tokensSortByLosers:(0,a.useQuery)({queryKey:f.exploreQueryKeys.tokens("losers",b,S,x),enabled:A,queryFn:()=>{if(!w)throw new Error("No account found");return(0,p.getTokens)("losers",b,t,S,x,v,w,y)},keepPreviousData:!0,cacheTime:(0,s.toMilliseconds)({minutes:10})}),tokensSortByVolume:(0,a.useQuery)({queryKey:f.exploreQueryKeys.tokens("volume",b,S,x),enabled:A,queryFn:()=>{if(!w)throw new Error("No account found");return(0,p.getTokens)("volume",b,t,S,x,v,w,y)},keepPreviousData:!0,cacheTime:(0,s.toMilliseconds)({minutes:10})}),tokensSortByMarketCap:(0,a.useQuery)({queryKey:f.exploreQueryKeys.tokens("market_cap",b,S,x),enabled:A,queryFn:()=>{if(!w)throw new Error("No account found");return(0,p.getTokens)("market_cap",b,t,S,x,v,w,y)},keepPreviousData:!0,cacheTime:(0,s.toMilliseconds)({minutes:10})})}}})),i.register("9d4Nm",(function(t,n){e(t.exports,"getSites",(function(){return u}),(function(e){return u=e}));var r=i("4xbAj"),o=i("iOvk1"),s=i("beWYh"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t,n,i,u,c,l,d)=>a(void 0,void 0,void 0,(function*(){var a,p;const f=null!==(a=null==l?void 0:l.addresses.map(o.chainAddressToCaip19Address))&&void 0!==a?a:[],h=(null==l?void 0:l.type)===r.AccountType.Seed?l.seedIdentifier:null,y=null!==(p=null==l?void 0:l.identifier)&&void 0!==p?p:"",m={appVersion:i,locale:u,platform:c,limit:10,timeframe:"24h",rankBy:e,chainIds:t,accountId:y,deviceId:d,rootId:h,selectedAccountAddresses:f},g=`${n}/explore/v1/trending-dapps`,v=new(0,s.RequestClient);v.withDefaultHeaders({"Content-Type":"application/json"});const S=yield v.post(g,m);if(!(0,s.responseIsOkay)(S))throw new Error("Failed to fetch sites");return S.data}))})),i.register("2dXn0",(function(t,n){e(t.exports,"getTokens",(function(){return u}),(function(e){return u=e}));var r=i("4xbAj"),o=i("iOvk1"),s=i("beWYh"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t,n,i,u,c,l,d)=>a(void 0,void 0,void 0,(function*(){var a,p;const f=null!==(a=null==l?void 0:l.addresses.map(o.chainAddressToCaip19Address))&&void 0!==a?a:[],h=(null==l?void 0:l.type)===r.AccountType.Seed?l.seedIdentifier:null,y=null!==(p=null==l?void 0:l.identifier)&&void 0!==p?p:"",m={appVersion:i,locale:u,platform:c,limit:10,timeframe:"24h",rankBy:e,chainIds:t,accountId:y,deviceId:d,rootId:h,selectedAccountAddresses:f},g=new(0,s.RequestClient);g.withDefaultHeaders({"Content-Type":"application/json"});const v=yield g.post(`${n}/explore/v1/trending-tokens`,m);if(!(0,s.responseIsOkay)(v))throw new Error("Failed to fetch tokens");const S=v.data;return Object.assign(Object.assign({},S),{data:S.data.filter((e=>e.tokens.length>0))})}))})),i.register("1z5C9",(function(t,n){e(t.exports,"useLearn",(function(){return f}),(function(e){return f=e}));var r=i("4xbAj"),o=i("iOvk1"),s=i("43063"),a=i("5ekp2"),u=i("10kLD"),c=i("aAtpt"),l=i("jlkga"),d=i("hSXsO"),p=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const f=(e,t,n,i)=>{var f;const{platform:h,appVersion:y}=(0,c.useExplore)(),m=n.useEnabledNetworkIDs().filter((e=>e!==o.BitcoinNetworkID.Mainnet||i())),{data:g}=t.useSelectedMultiChainAccount(),{data:v=[]}=t.useAllMultiChainAccounts(),S=null!==(f=(0,u.getSupportedLanguageValue)(s.i18next.language))&&void 0!==f?f:"en";return(0,a.useQuery)({queryKey:d.exploreQueryKeys.learn(y,m,S),enabled:v.length>0&&g&&g.type!==r.AccountType.ReadOnly,queryFn:()=>p(void 0,void 0,void 0,(function*(){return(0,l.getLearnItems)(e,m,y,S,h)})),refetchOnMount:"always"})}})),i.register("jlkga",(function(t,n){e(t.exports,"getLearnItems",(function(){return s}),(function(e){return s=e}));var r=i("beWYh"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const s=(e,t,n,i,s)=>o(void 0,void 0,void 0,(function*(){const o={chainIds:t,platform:s,locale:i,appVersion:n},a=`${e}/explore/v1/learn-grid`,u=new(0,r.RequestClient);u.withDefaultHeaders({"Content-Type":"application/json"});const c=yield u.post(a,o);if(!(0,r.responseIsOkay)(c))throw new Error("Failed to fetch learn grid");return c.data}))})),i.register("9A7Xn",(function(t,n){e(t.exports,"useRecommendedCollections",(function(){return f}));var r=i("4xbAj"),o=i("iOvk1"),s=i("43063"),a=i("RVqnc"),u=i("5ekp2"),c=i("10kLD"),l=i("aAtpt"),d=i("2gKV2"),p=i("hSXsO");const f=(e,t,n,i,f)=>{var h;const{platform:y,appVersion:m}=(0,l.useExplore)(),g=n.useEnabledNetworkIDs().filter((e=>e!==o.BitcoinNetworkID.Mainnet||f())),{data:v}=t.useSelectedMultiChainAccount(),{data:S=[]}=t.useAllMultiChainAccounts(),b=null!==(h=(0,c.getSupportedLanguageValue)(s.i18next.language))&&void 0!==h?h:"en";return(0,u.useQuery)({queryKey:p.exploreQueryKeys.recommendedCollections(m,g,b),enabled:S.length>0&&v&&v.type!==r.AccountType.ReadOnly,queryFn:()=>{if(!v)throw new Error("No account found");return(0,d.getRecommendedCollections)(e,g,m,b,y,v,i)},cacheTime:(0,a.toMilliseconds)({minutes:10})})}})),i.register("2gKV2",(function(t,n){e(t.exports,"getRecommendedCollections",(function(){return u}),(function(e){return u=e}));var r=i("4xbAj"),o=i("iOvk1"),s=i("beWYh"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t,n,i,u,c,l)=>a(void 0,void 0,void 0,(function*(){var a,d;const p=null!==(a=null==c?void 0:c.addresses.map(o.chainAddressToCaip19Address))&&void 0!==a?a:[],f=(null==c?void 0:c.type)===r.AccountType.Seed?c.seedIdentifier:null,h=null!==(d=null==c?void 0:c.identifier)&&void 0!==d?d:"",y={appVersion:n,locale:i,platform:u,limit:6,timeframe:"24h",chainIds:t,accountId:h,deviceId:l,rootId:f,selectedAccountAddresses:p},m=`${e}/explore/v1/featured-collections`,g=new(0,s.RequestClient);g.withDefaultHeaders({"Content-Type":"application/json"});const v=yield g.post(m,y);if(!(0,s.responseIsOkay)(v))throw new Error("Failed to fetch collections");const S=v.data;return Object.assign(Object.assign({},S),{data:S.data.filter((e=>e.floorPrices.length>0&&e.marketplacePages.length>0))})}))})),i.register("96Goz",(function(t,n){e(t.exports,"useRecommendedSearchSites",(function(){return f}),(function(e){return f=e}));var r=i("csW2r"),o=i("RVqnc"),s=i("4nwh4"),a=i("5ekp2"),u=i("7dHjq"),c=i("16XMG"),l=i("ggjh9"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const p=e=>d(void 0,void 0,void 0,(function*(){const t=yield fetch((e=>{const t={isRecommended:"true"};e.networkIds&&(t.chainIds=e.networkIds.join(","));const n=new URLSearchParams(t);return`${(0,c.getAPIEnvironment)()}/dapps/v1?${n.toString()}`})(e),{headers:{"content-type":"application/json"}});if(500===t.status)throw new Error("Error fetching recommended dapps from registry");return(yield t.json()).data})),f=e=>{const t=(0,u.useQueryClient)();return(0,a.useQuery)({queryKey:["dapps","recommended",e],queryFn:()=>p(e),cacheTime:(0,o.toMilliseconds)({days:1}),onError:e=>{r.telemetry.captureError(e,r.FeatureTag.DappRegistry)},onSuccess:e=>{s.notifyManager.batch((()=>{for(const n of null!=e?e:[]){const e=(0,l.createExploreDappQueryKey)(n.domain),r=t.getQueryState(e);t.setQueryData(e,(()=>{var e;return null!==(e=null!=n?n:null==r?void 0:r.data)&&void 0!==e?e:null}))}}))}})}})),i.register("ggjh9",(function(t,n){e(t.exports,"createExploreDappQueryKey",(function(){return r}));const r=e=>["explore-dapp",e]})),i.register("5FhX9",(function(t,n){e(t.exports,"useRecommendedSites",(function(){return f}));var r=i("4xbAj"),o=i("iOvk1"),s=i("43063"),a=i("RVqnc"),u=i("5ekp2"),c=i("10kLD"),l=i("aAtpt"),d=i("kOrpb"),p=i("hSXsO");const f=(e,t,n,i,f)=>{var h;const{platform:y,appVersion:m}=(0,l.useExplore)(),g=n.useEnabledNetworkIDs().filter((e=>e!==o.BitcoinNetworkID.Mainnet||f())),{data:v}=t.useSelectedMultiChainAccount(),{data:S=[]}=t.useAllMultiChainAccounts(),b=null!==(h=(0,c.getSupportedLanguageValue)(s.i18next.language))&&void 0!==h?h:"en";return(0,u.useQuery)({queryKey:p.exploreQueryKeys.recommendedSites(m,g,b),enabled:S.length>0&&v&&v.type!==r.AccountType.ReadOnly,queryFn:()=>{if(!v)throw new Error("No account found");return(0,d.getRecommendedSites)(e,g,m,b,y,v,i)},cacheTime:(0,a.toMilliseconds)({minutes:10})})}})),i.register("kOrpb",(function(t,n){e(t.exports,"getRecommendedSites",(function(){return u}),(function(e){return u=e}));var r=i("4xbAj"),o=i("iOvk1"),s=i("beWYh"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t,n,i,u,c,l)=>a(void 0,void 0,void 0,(function*(){var a,d;const p=null!==(a=null==c?void 0:c.addresses.map(o.chainAddressToCaip19Address))&&void 0!==a?a:[],f=(null==c?void 0:c.type)===r.AccountType.Seed?c.seedIdentifier:null,h=null!==(d=null==c?void 0:c.identifier)&&void 0!==d?d:"",y={appVersion:n,locale:i,platform:u,limit:6,timeframe:"24h",chainIds:t,accountId:h,deviceId:l,rootId:f,selectedAccountAddresses:p},m=`${e}/explore/v1/featured-dapps`,g=new(0,s.RequestClient);g.withDefaultHeaders({"Content-Type":"application/json"});const v=yield g.post(m,y);if(!(0,s.responseIsOkay)(v))throw new Error("Failed to fetch sites");return yield v.data}))})),i.register("7YRkB",(function(t,n){e(t.exports,"useRecommendedTokens",(function(){return f}));var r=i("4xbAj"),o=i("iOvk1"),s=i("43063"),a=i("RVqnc"),u=i("5ekp2"),c=i("10kLD"),l=i("aAtpt"),d=i("8v9Wp"),p=i("hSXsO");const f=(e,t,n,i,f)=>{var h;const{platform:y,appVersion:m}=(0,l.useExplore)(),{data:g}=t.useSelectedMultiChainAccount(),{data:v=[]}=t.useAllMultiChainAccounts(),S=n.useEnabledNetworkIDs().filter((e=>e!==o.BitcoinNetworkID.Mainnet||f())),b=null!==(h=(0,c.getSupportedLanguageValue)(s.i18next.language))&&void 0!==h?h:"en";return(0,u.useQuery)({queryKey:p.exploreQueryKeys.recommendedTokens(m,S,b),enabled:v.length>0&&g&&g.type!==r.AccountType.ReadOnly,queryFn:()=>{if(!g)throw new Error("No account found");return(0,d.getRecommendedTokens)(e,S,m,b,y,g,i)},cacheTime:(0,a.toMilliseconds)({minutes:10})})}})),i.register("8v9Wp",(function(t,n){e(t.exports,"getRecommendedTokens",(function(){return u}),(function(e){return u=e}));var r=i("4xbAj"),o=i("iOvk1"),s=i("beWYh"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t,n,i,u,c,l)=>a(void 0,void 0,void 0,(function*(){var a,d;const p=null!==(a=null==c?void 0:c.addresses.map(o.chainAddressToCaip19Address))&&void 0!==a?a:[],f=(null==c?void 0:c.type)===r.AccountType.Seed?c.seedIdentifier:null,h=null!==(d=null==c?void 0:c.identifier)&&void 0!==d?d:"",y={appVersion:n,locale:i,platform:u,limit:6,timeframe:"24h",chainIds:t,accountId:h,deviceId:l,rootId:f,selectedAccountAddresses:p},m=new(0,s.RequestClient);m.withDefaultHeaders({"Content-Type":"application/json"});const g=yield m.post(`${e}/explore/v1/featured-tokens`,y);if(!(0,s.responseIsOkay)(g))throw new Error("Failed to fetch tokens");const v=g.data;return Object.assign(Object.assign({},v),{data:v.data.filter((e=>e.tokens.length>0))})}))})),i.register("9HxvY",(function(t,n){e(t.exports,"useSites",(function(){return f}));var r=i("4xbAj"),o=i("43063"),s=i("RVqnc"),a=i("5ekp2"),u=i("10kLD"),c=i("aAtpt"),l=i("9d4Nm"),d=i("hSXsO"),p=i("2gAtf");const f=(e,t,n,i,f,h)=>{var y;const{platform:m,appVersion:g}=(0,c.useExplore)(),{networkIds:v}=(0,p.useExploreSelectedNetwork)(e,i,h),{data:S,isLoading:b}=(0,p.useExploreSortSites)(e),{data:w}=n.useSelectedMultiChainAccount(),{data:E=[]}=n.useAllMultiChainAccounts(),x=null!==(y=(0,u.getSupportedLanguageValue)(o.i18next.language))&&void 0!==y?y:"en";return(0,a.useQuery)({queryKey:d.exploreQueryKeys.sites(S,v,g,x),enabled:!b&&E.length>0&&w&&w.type!==r.AccountType.ReadOnly,queryFn:()=>{if(!w)throw new Error("No account found");return(0,l.getSites)(S,v,t,g,x,m,w,f)},keepPreviousData:!0,cacheTime:(0,s.toMilliseconds)({minutes:10})})}})),i.register("iH1mQ",(function(t,n){e(t.exports,"useTokens",(function(){return f}));var r=i("4xbAj"),o=i("43063"),s=i("RVqnc"),a=i("5ekp2"),u=i("10kLD"),c=i("aAtpt"),l=i("2dXn0"),d=i("hSXsO"),p=i("2gAtf");const f=(e,t,n,i,f,h)=>{var y;const{platform:m,appVersion:g}=(0,c.useExplore)(),{networkIds:v}=(0,p.useExploreSelectedNetwork)(e,i,h),{data:S}=n.useSelectedMultiChainAccount(),{data:b=[]}=n.useAllMultiChainAccounts(),{data:w,isLoading:E}=(0,p.useExploreSortTokens)(e),x=null!==(y=(0,u.getSupportedLanguageValue)(o.i18next.language))&&void 0!==y?y:"en";return(0,a.useQuery)({queryKey:d.exploreQueryKeys.tokens(w,v,g,x),enabled:!E&&b.length>0&&S&&S.type!==r.AccountType.ReadOnly,keepPreviousData:!0,queryFn:()=>{if(!S)throw new Error("No account found");return(0,l.getTokens)(w,v,t,g,x,m,S,f)},cacheTime:(0,s.toMilliseconds)({minutes:10})})}})),i.register("5MRwA",(function(t,n){e(t.exports,"ExploreAnalytics",(function(){return s}),(function(e){return s=e}));var r,o=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},i=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class s{constructor(e){r.set(this,void 0),this.onExploreTabClickedByUser=e=>{i(this,r,"f").capture("onExploreTabClickedByUser",{data:{explore:e}})},this.onExploreTabTitlesDragged=()=>{i(this,r,"f").capture("onExploreTabTitlesDragged")},this.onExploreFilterChangedByUser=e=>{i(this,r,"f").capture("onExploreFilterChangedByUser",{data:{explore:e}})},this.onExploreListShownToUser=e=>{i(this,r,"f").capture("onExploreListShownToUser",{data:{explore:e}})},this.onExploreCarouselShownToUser=e=>{i(this,r,"f").capture("onExploreCarouselShownToUser",{data:{explore:e}})},this.onExploreListItemClickedByUser=e=>{i(this,r,"f").capture("onExploreListItemClickedByUser",{data:{explore:e}})},this.onExploreCarouselItemClickedByUser=e=>{i(this,r,"f").capture("onExploreCarouselItemClickedByUser",{data:{explore:e}})},this.onExploreLearnItemClickedByUser=e=>{i(this,r,"f").capture("onExploreLearnItemClickedByUser",{data:{explore:e}})},this.onExploreLearnSectionScrolledIntoView=()=>{i(this,r,"f").capture("onExploreLearnSectionScrolledIntoView")},this.onExploreCarouselDragged=e=>{i(this,r,"f").capture("onExploreCarouselDragged",{data:{explore:e}})},this.onExploreSearchedByUser=e=>{i(this,r,"f").capture("onExploreSearchedByUser",{data:{explore:e}})},this.onExploreSearchItemClickedByUser=e=>{i(this,r,"f").capture("onExploreSearchItemClickedByUser",{data:{explore:e}})},o(this,r,e,"f")}}r=new WeakMap})),i.register("gjBV4",(function(t,n){e(t.exports,"FUSE_EXPLORE_DAPPS_CONFIG",(function(){return r}));const r={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"domain",weight:.5},{name:"name",weight:.4},{name:"tags",weight:.1}]}})),i.register("bBa7X",(function(t,n){e(t.exports,"createFiatRampHooks",(function(){return i("i0dmL").createFiatRampHooks})),e(t.exports,"FIAT_RAMP_FUNGIBLES_QUERY_KEY",(function(){return i("7SrdS").FIAT_RAMP_FUNGIBLES_QUERY_KEY})),e(t.exports,"FUSE_SEARCH_CONFIG_TOKEN_WITH_PROVIDERS",(function(){return i("lEMey").FUSE_SEARCH_CONFIG_TOKEN_WITH_PROVIDERS})),e(t.exports,"getProviderUrl",(function(){return i("9JJcA").getProviderUrl})),e(t.exports,"getMoonpayBadge",(function(){return i("gAHmZ").getMoonpayBadge}));i("i0dmL"),i("7SrdS"),i("8jXa8"),i("cSQX7"),i("lEMey"),i("9bG5r"),i("9JJcA"),i("gAHmZ"),i("bNGPD")})),i.register("i0dmL",(function(t,n){e(t.exports,"createFiatRampHooks",(function(){return o}));var r=i("6ecrj");function o(e){return{useSupportedTokens:(t,n)=>(0,r.useSupportedTokens)(e,t,n)}}})),i.register("6ecrj",(function(t,n){e(t.exports,"useSupportedTokens",(function(){return p}));var r=i("43063"),o=i("RVqnc"),s=i("5ekp2"),a=i("10kLD"),u=i("gohE1"),c=i("7SrdS");const l=(0,o.toMilliseconds)({days:7}),d=(0,o.toMilliseconds)({hours:1}),p=(e,t,n)=>{var o;const i={chainIDs:t,locale:null!==(o=(0,a.getSupportedLanguageValue)(r.i18next.language))&&void 0!==o?o:"en",clientPlatform:n};return(0,s.useQuery)({queryKey:c.fiatRampQueryKeys.fiatFungibles(i),queryFn:()=>(0,u.getSupportedTokens)(e(),i),cacheTime:l,staleTime:d})}})),i.register("gohE1",(function(t,n){e(t.exports,"getSupportedTokens",(function(){return u}),(function(e){return u=e}));var r=i("8jXa8"),o=i("bNGPD"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const a=new(0,r.FiatRampError)("Failed to get fiat tokens and providers.");function u(e,t){return s(this,void 0,void 0,(function*(){try{const n=yield fetch(`${e}/fiat_ramp/v1/onramp/supported_tokens`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});if(!n.ok)throw a;const r=yield n.json();return(0,o.processSupportedTokensResponse)(r)}catch(e){throw a}}))}})),i.register("8jXa8",(function(t,n){e(t.exports,"FiatRampSupportedTokensResponse",(function(){return l})),e(t.exports,"FiatRampError",(function(){return d}));var r=i("iOvk1"),o=i("7mQ3Y"),s=i("7XqVB");const a=s.z.object({providerID:s.z.string(),name:s.z.string(),description:s.z.string(),badgeText:s.z.string().optional(),fiatRampProviderAsset:s.z.object({circleColor:s.z.string(),logoUri:s.z.string()})}),u=s.z.object({name:s.z.string().nullable(),symbol:s.z.string().nullable(),decimals:s.z.number(),caip19:r.FungibleCaip19,logoURI:s.z.string().nullable()}),c=s.z.object({token:u,addressType:o.BitcoinAddressType.optional(),providerIDs:s.z.array(s.z.string())}),l=s.z.object({providers:s.z.array(a),tokens:s.z.array(c)});class d extends Error{constructor(e){super(e),this.name="FiatRampError"}}})),i.register("bNGPD",(function(t,n){e(t.exports,"processSupportedTokensResponse",(function(){return o}));var r=i("8jXa8");const o=e=>{const t=r.FiatRampSupportedTokensResponse.parse(e),n={};for(const e of t.providers)n[e.providerID]=e;return{providerIDToProvider:n,tokenWithProvidersList:t.tokens}}})),i.register("7SrdS",(function(t,n){e(t.exports,"FIAT_RAMP_FUNGIBLES_QUERY_KEY",(function(){return r})),e(t.exports,"fiatRampQueryKeys",(function(){return o}));const r="@phantom/fiat-ramp:fiat-fungibles",o={fiatFungibles:e=>[r,e]}})),i.register("cSQX7",(function(e,t){var n,r,o,s;i("iOvk1"),i("5slFC"),i("24hfq");(r=n||(n={})).CoinbasePay="coinbase-pay",r.Moonpay="moonpay",(s=o||(o={}))["USDC-SOL"]="EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",s.USDT="Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",s["USDC-ETH"]="0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",s["USDC-MATIC"]="0x2791bca1f2de4661ed88a30c99a7a9449aa84174",s.DAI="0x6b175474e89094c44da98b954eedeac495271d0f",s["ETH-MATIC"]="0x7ceb23fd6bc0add59e62ac25578270cff1b9f619",s["USDT-ETH"]="0xdac17f958d2ee523a2206206994597c13d831ec7",s["USDT-MATIC"]="0xc2132d05d31c914a87c6611c10748aeb04b58e8f",s["WBTC-ETH"]="0x2260fac5e5542a773aa44fbcfedf7c193bc2c599",s["WETH-ETH"]="0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2";const a={[n.CoinbasePay]:new Set([o["USDC-SOL"],o["USDC-ETH"],o["USDC-MATIC"]]),[n.Moonpay]:new Set([o["USDC-SOL"],o["USDC-ETH"],o["USDC-MATIC"],o.DAI,o["ETH-MATIC"],o["USDT-ETH"],o["USDT-MATIC"],o["WBTC-ETH"],o["WETH-ETH"]])};new Set(Object.values(a).reduce(((e,t)=>new Set([...e,...t])),new Set))})),i.register("lEMey",(function(t,n){e(t.exports,"MOONPAY_API_KEY",(function(){return r})),e(t.exports,"MOONPAY_ROUTE_PREFIX",(function(){return o})),e(t.exports,"MOONPAY_DEFAULT_CURRENCY_CODE",(function(){return i})),e(t.exports,"MOONPAY_BASE_CURRENCY_CODE",(function(){return s})),e(t.exports,"MOONPAY_ENABLED_PAYMENTS",(function(){return a})),e(t.exports,"MOONPAY_TOKEN_SYMBOL_MAPPING",(function(){return u})),e(t.exports,"MOONPAY_COLOR_CODE",(function(){return c})),e(t.exports,"FUSE_SEARCH_CONFIG_TOKEN_WITH_PROVIDERS",(function(){return l}));const r="pk_live_g3KLHBinccCUh1j2eXWng19TFuqcItWC",o="buy",i="SOL",s="usd",a=["credit_debit_card","apple_pay","google_pay","samsung_pay","sepa_bank_transfer","gbp_bank_transfer","gbp_open_banking_payment"],u={"USDC-SOL":"USDC_SOL",USDT:"USDT_SOL",SOL:"SOL",ETH:"ETH","USDC-ETH":"USDC",MATIC:"MATIC_POLYGON","USDC-MATIC":"USDC_POLYGON","DAI-ETH":"DAI","ETH-MATIC":"ETH_POLYGON","USDT-ETH":"USDT","USDT-MATIC":"USDT_POLYGON","WBTC-ETH":"WBTC","WETH-ETH":"WETH"},c="#ab9ff2",l={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"token.name",weight:.4},{name:"token.symbol",weight:.4},{name:"token.caip19.chainId",weight:.2}]}})),i.register("9bG5r",(function(e,t){i("dDG8Y")})),i.register("dDG8Y",(function(t,n){e(t.exports,"generateOnRampURL",(function(){return c}));var r,o,i=Object.defineProperty,s=(e,t)=>i(e,"name",{value:t,configurable:!0}),a=(e,t,n)=>(((e,t,n)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),u="https://pay.coinbase.com",c=s((({host:e=u,destinationWallets:t,...n})=>{const r=new URL(e);return r.pathname="/buy/select-asset",r.searchParams.append("destinationWallets",JSON.stringify(t)),Object.keys(n).forEach((e=>{const t=n[e];void 0!==t&&r.searchParams.append(e,t.toString())})),r.searchParams.sort(),r.toString()}),"generateOnRampURL"),l="cbpay-embedded-onramp",d=s((({url:e,width:t="100%",height:n="100%",position:r="fixed",top:o="0px"})=>{const i=document.createElement("iframe");return i.style.border="unset",i.style.borderWidth="0",i.style.width=t.toString(),i.style.height=n.toString(),i.style.position=r,i.style.top=o,i.id=l,i.src=e,i}),"createEmbeddedContent");(o=r||(r={})).LaunchEmbedded="launch_embedded",o.AppReady="app_ready",o.AppParams="app_params",o.SigninSuccess="signin_success",o.Success="success",o.Exit="exit",o.Event="event",o.Error="error",o.PixelReady="pixel_ready",o.OnAppParamsNonce="on_app_params_nonce";var p=s(((e,{onMessage:t,shouldUnsubscribe:n=!0,allowedOrigin:r,onValidateOrigin:o=s((()=>Promise.resolve(!0)),"onValidateOrigin")})=>{const i=s((s=>{const{eventName:a,data:u}=h(s.data),c=!r||s.origin===r;a===e&&(async()=>{c&&await o(s.origin)&&(t(u),n&&window.removeEventListener("message",i))})()}),"onMessage");return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}}),"onBroadcastedPostMessage"),f=s(((e,t,{allowedOrigin:n="*",data:r}={})=>{const o=y(t,r);e.postMessage(o,n)}),"broadcastPostMessage"),h=s((e=>{try{return JSON.parse(e)}catch{return{eventName:e}}}),"parsePostMessage"),y=s(((e,t)=>t?JSON.stringify({eventName:e,data:t}):e),"formatPostMessage"),m="/embed",g="coinbase-sdk-connect",v={signin:{width:460,height:730},widget:{width:430,height:600}},S=class{constructor({host:e=u,appId:t,appParams:n,onReady:r,onFallbackOpen:o,debug:i}){a(this,"state","loading"),a(this,"nonce",""),a(this,"eventStreamListeners",{}),a(this,"unsubs",[]),a(this,"isLoggedIn",!1),a(this,"openExperience",s((e=>{if(this.log("Attempting to open experience",{state:this.state}),"waiting_for_response"===this.state)return;if("loading"===this.state)return;if("failed"===this.state)return void this.onFallbackOpen?.();if(!this.nonce)throw new Error("Attempted to open CB Pay experience without nonce");const t=this.nonce;this.nonce="",this.setupExperienceListeners(e);const{path:n,experienceLoggedIn:r,experienceLoggedOut:o,embeddedContentStyles:i}=e,a=new URL(`${this.host}${n}`);a.searchParams.append("appId",this.appId),a.searchParams.append("type","secure_standalone");const u=this.isLoggedIn?r:o||r;a.searchParams.append("nonce",t);const c=a.toString();if(this.log("Opening experience",{experience:u,isLoggedIn:this.isLoggedIn}),"embedded"===u){const e=s((()=>{const e=d({url:c,...i});i?.target?document.querySelector(i?.target)?.replaceChildren(e):document.body.appendChild(e)}),"openEmbeddedExperience");this.isLoggedIn?e():this.startDirectSignin(e)}else"popup"===u&&window.chrome?.windows?.create?window.chrome.windows.create({url:c,setSelfAsOpener:!0,type:"popup",focused:!0,width:v.signin.width,height:v.signin.height,left:window.screenLeft-v.signin.width-10,top:window.screenTop},(e=>{this.addEventStreamListener("open",(()=>{e?.id&&chrome.windows.update(e.id,{width:v.widget.width,height:v.widget.height,left:window.screenLeft-v.widget.width-10,top:window.screenTop})}))})):"new_tab"===u&&window.chrome?.tabs?.create?window.chrome.tabs.create({url:c}):w(c,u);const l=s((()=>{this.sendAppParams(),this.removeEventStreamListener("open",l)}),"onOpen");this.addEventStreamListener("open",l)}),"openExperience")),a(this,"endExperience",s((()=>{document.getElementById(l)?.remove()}),"endExperience")),a(this,"destroy",s((()=>{document.getElementById(g)?.remove(),this.unsubs.forEach((e=>e()))}),"destroy")),a(this,"addPixelReadyListener",s((()=>{this.onMessage("pixel_ready",{shouldUnsubscribe:!1,onMessage:e=>{this.log("Received message: pixel_ready"),this.isLoggedIn=!!e?.isLoggedIn,this.removeErrorListener?.(),this.sendAppParams((()=>{this.onReadyCallback?.()}))}})}),"addPixelReadyListener")),a(this,"addErrorListener",s((()=>{this.removeErrorListener=this.onMessage("error",{shouldUnsubscribe:!0,onMessage:e=>{if(this.log("Received message: error"),e){const t="string"==typeof e?e:JSON.stringify(e);this.onReadyCallback?.(new Error(t))}}})}),"addErrorListener")),a(this,"embedPixel",s((()=>{document.getElementById(g)?.remove();const e=b({host:this.host,appId:this.appId});e.onerror=this.onFailedToLoad,this.pixelIframe=e,document.body.appendChild(e)}),"embedPixel")),a(this,"onFailedToLoad",s((()=>{if(this.state="failed",this.onFallbackOpen)this.debug&&console.warn("Failed to load CB Pay pixel. Falling back to opening in new tab."),this.onReadyCallback?.();else{const e=new Error("Failed to load CB Pay pixel");this.debug&&console.error(e),this.onReadyCallback?.(e)}}),"onFailedToLoad")),a(this,"sendAppParams",s((e=>{this.pixelIframe?.contentWindow?(this.log("Sending message: app_params"),this.onMessage("on_app_params_nonce",{onMessage:t=>{this.state="ready",this.nonce=t?.nonce||"",e?.()}}),this.state="waiting_for_response",f(this.pixelIframe.contentWindow,"app_params",{data:this.appParams})):(console.error("Failed to find pixel content window"),this.state="failed",this.onFallbackOpen?.())}),"sendAppParams")),a(this,"setupExperienceListeners",s((({onSuccess:e,onExit:t,onEvent:n})=>{this.onMessage("event",{shouldUnsubscribe:!1,onMessage:r=>{const o=r;this.eventStreamListeners[o.eventName]?.forEach((e=>e?.())),"success"===o.eventName&&e?.(),"exit"===o.eventName&&t?.(o.error),n?.(r)}})}),"setupExperienceListeners")),a(this,"startDirectSignin",s((e=>{const t=new URLSearchParams;t.set("appId",this.appId),t.set("type","direct");const n=w(`${this.host}/signin?${t.toString()}`,"popup");this.onMessage("signin_success",{onMessage:()=>{n?.close(),e()}})}),"startDirectSignin")),a(this,"addEventStreamListener",s(((e,t)=>{this.eventStreamListeners[e]?this.eventStreamListeners[e]?.push(t):this.eventStreamListeners[e]=[t]}),"addEventStreamListener")),a(this,"removeEventStreamListener",s(((e,t)=>{if(this.eventStreamListeners[e]){const n=this.eventStreamListeners[e]?.filter((e=>e!==t));this.eventStreamListeners[e]=n}}),"removeEventStreamListener")),a(this,"onMessage",s(((...e)=>{const t=p(e[0],{allowedOrigin:this.host,...e[1]});return this.unsubs.push(t),t}),"onMessage")),a(this,"log",s(((...e)=>{this.debug&&console.log("[CBPAY]",...e)}),"log")),this.host=e,this.appId=t,this.appParams=n,this.onReadyCallback=r,this.onFallbackOpen=o,this.debug=i||!1,this.addPixelReadyListener(),this.addErrorListener(),this.embedPixel(),setTimeout((()=>{"ready"!==this.state&&this.onFailedToLoad()}),5e3)}};function b({host:e,appId:t}){const n=document.createElement("iframe");n.style.border="unset",n.style.borderWidth="0",n.style.width="0",n.style.height="0",n.style.height="0",n.id=g;const r=new URL(`${e}${m}`);return r.searchParams.append("appId",t),n.src=r.toString(),n}function w(e,t){return window.open(e,"Coinbase","popup"===t?`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height=${v.signin.height},width=${v.signin.width}`:void 0)}s(S,"CoinbasePixel"),s(b,"createPixel"),s(w,"openWindow");var E={buy:"/buy",checkout:"/checkout"},x=class{constructor(e){if(a(this,"open",s((()=>{const{widget:e,experienceLoggedIn:t,experienceLoggedOut:n,embeddedContentStyles:r,onExit:o,onSuccess:i,onEvent:s,closeOnSuccess:a,closeOnExit:u}=this.options;this.pixel.openExperience({path:E[e],experienceLoggedIn:t,experienceLoggedOut:n,embeddedContentStyles:r,onExit:()=>{o?.(),u&&this.pixel.endExperience()},onSuccess:()=>{i?.(),a&&this.pixel.endExperience()},onEvent:s})}),"open")),a(this,"destroy",s((()=>{this.pixel.destroy()}),"destroy")),this.options=e,this.pixel=new S({...e,appParams:{widget:e.widget,...e.appParams}}),e.target){const t=document.querySelector(e.target);t&&t.addEventListener("click",this.open)}}};s(x,"CBPayInstance");s((function(e,t){f(e,"event",{data:t})}),"broadcastEvent")})),i.register("9JJcA",(function(t,n){e(t.exports,"getProviderUrl",(function(){return u}),(function(e){return u=e}));var r=i("iOvk1"),o=i("8jXa8"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const a=new(0,o.FiatRampError)("Failed to get provider url");function u(e,t){return s(this,void 0,void 0,(function*(){try{(0,r.isEvmCaip19Address)(t.defaultToken)&&(t.defaultToken.address=t.defaultToken.address.toLowerCase()),t.userAddresses.forEach((e=>{(0,r.isEvmCaip19Address)(e)&&(e.address=e.address.toLowerCase())}));const n=yield fetch(`${e}/fiat_ramp/v1/onramp/get_url`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});if(!n.ok)throw a;const o=yield n.json();if(!o.url)throw a;return o.url}catch(e){throw a}}))}})),i.register("gAHmZ",(function(t,n){e(t.exports,"getMoonpayBadge",(function(){return l}),(function(e){return l=e}));var r=i("iOvk1"),o=i("3ljHn"),s=i("43063"),a=(i("csW2r"),i("RVqnc"));i("5ekp2"),i("16XMG"),i("lEMey");new Error("Error generating MoonPay URL");const u={startDate:new Date("2023-05-08T00:00-04:00"),endDate:new Date("2023-06-09T00:00-07:00")},c={month:"short",day:"numeric"},l=(e,t,n)=>{const i=(()=>{const e=o.featureFlagClient.getMultivariateAssignment("moonpay_may_promo_duration_unixtime_in_sec");if(null===e)return u;try{const[t,n]=e.split("-");return{startDate:new Date((0,a.toMilliseconds)({seconds:parseInt(t)})),endDate:new Date((0,a.toMilliseconds)({seconds:parseInt(n)}))}}catch(e){return u}})();return((e,t,n)=>{if(null==e)return!1;const o=new Date,i=o>=n.startDate&&o<=n.endDate,s=r.Chains.isEthereumNetworkID(e)&&t===r.Chains.ethereum.tokenSymbol||r.Chains.isPolygonNetworkID(e)&&t===r.Chains.polygon.tokenSymbol;return i&&s})(t,n,i)?((e,t)=>{const n=new Date(t.endDate);return n.setDate(n.getDate()-1),e("depositAssetMoonpayBadgePromo",{endDate:n.toLocaleDateString(s.i18next.language,c)})})(e,i):e("depositAssetMoonpayBadge")}})),i.register("ibwoK",(function(t,n){e(t.exports,"INTERSTITIALS_STORAGE_KEY",(function(){return i("lqr4n").INTERSTITIALS_STORAGE_KEY})),e(t.exports,"ActionBannerType",(function(){return i("bqmaR").ActionBannerType})),e(t.exports,"DeepLinkDestination",(function(){return i("bqmaR").DeepLinkDestination})),e(t.exports,"InterstitialFeature",(function(){return i("bqmaR").InterstitialFeature})),e(t.exports,"Platform",(function(){return i("bqmaR").Platform})),e(t.exports,"createInterstitialHooks",(function(){return i("4UO4j").createInterstitialHooks})),e(t.exports,"ACTION_BANNERS_QUERY_KEY",(function(){return i("g5ETd").ACTION_BANNERS_QUERY_KEY})),e(t.exports,"invalidateActionBanners",(function(){return i("adKVG").invalidateActionBanners})),e(t.exports,"ActionBannerAnalytics",(function(){return i("4QvCM").ActionBannerAnalytics})),e(t.exports,"generateActionBannerBaseAnalyticsPayload",(function(){return i("de6RR").generateActionBannerBaseAnalyticsPayload})),e(t.exports,"generateActionBannerInterstitialAnalyticsPayload",(function(){return i("de6RR").generateActionBannerInterstitialAnalyticsPayload}));i("lqr4n"),i("bqmaR"),i("4UO4j"),i("g5ETd"),i("adKVG"),i("4QvCM"),i("de6RR")})),i.register("lqr4n",(function(t,n){e(t.exports,"INTERSTITIALS_STORAGE_KEY",(function(){return s}),(function(e){return s=e})),e(t.exports,"Interstitials",(function(){return a}),(function(e){return a=e}));var r=i("h5Ovd"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const s=".phantom-labs.settings.interstitials";class a{static hasSeen(e,t,n){var i;return o(this,void 0,void 0,(function*(){const o=yield t.get(s);if(!o)return!1;const a=(0,r.getMostRecentVersion)(e,n);return(null!==(i=o.interstitialsSeen[e])&&void 0!==i?i:0)>=a}))}static setHasSeen(e,t,n){return o(this,void 0,void 0,(function*(){const o=yield t.get(s),i=(0,r.getMostRecentVersion)(e,n);yield t.set(s,{version:1,interstitialsSeen:Object.assign(Object.assign({},!!o&&o.interstitialsSeen),{[e]:i})})}))}static resetHasSeen(e,t){return o(this,void 0,void 0,(function*(){const n=yield t.get(s);n&&t.set(s,{version:1,interstitialsSeen:Object.assign(Object.assign({},n.interstitialsSeen),{[e]:void 0})})}))}static resetAllHasSeen(e){return o(this,void 0,void 0,(function*(){(yield e.get(s))&&e.set(s,{version:1,interstitialsSeen:{}})}))}}})),i.register("h5Ovd",(function(t,n){e(t.exports,"getMostRecentVersion",(function(){return a}));var r=i("bqmaR");const o={[r.InterstitialFeature.Multichain]:2,[r.InterstitialFeature.MultichainSwapper]:1,[r.InterstitialFeature.InvalidChecksum]:1,[r.InterstitialFeature.HelloBitcoin]:1},s={[r.InterstitialFeature.Multichain]:3,[r.InterstitialFeature.MultichainSwapper]:1,[r.InterstitialFeature.InvalidChecksum]:1,[r.InterstitialFeature.HelloBitcoin]:1},a=(e,t)=>{switch(t){case"mobile":return o[e];case"browser-ext":return s[e];default:return-1}}})),i.register("bqmaR",(function(t,n){var r,o,i,s,a,u,c,l;e(t.exports,"ActionBannerType",(function(){return r})),e(t.exports,"DeepLinkDestination",(function(){return i})),e(t.exports,"DismissActionBannerError",(function(){return d})),e(t.exports,"Platform",(function(){return a})),e(t.exports,"InterstitialFeature",(function(){return c})),(o=r||(r={})).DirectLink="Deep Link",o.Modal="Modal",o.BottomSheet="Bottom Sheet",(s=i||(i={})).Buy="Buy",s.Collectibles="Collectibles",s.ConnectHardwareWallet="Connect Hardware Wallet",s.Explore="Explore",s.Quests="Quests",s.MintCollectible="Mint Collectible",s.SettingsImportSeedPhrase="Settings: Import Seed Phrase",s.SettingsNotificationPreferences="Settings: Notification Preferences",s.SettingsSecurityAndPrivacy="Settings: Security & Privacy",s.Swapper="Swapper",s.ExternalLink="External Link";class d extends Error{constructor(){super(...arguments),this.message="Failed to set dismissed action banners to storage"}}(u=a||(a={})).BrowserExt="browser-ext",u.Mobile="mobile",(l=c||(c={})).Multichain="Multichain",l.MultichainSwapper="MultichainSwapper",l.InvalidChecksum="InvalidChecksum",l.HelloBitcoin="HelloBitcoin"})),i.register("4UO4j",(function(t,n){e(t.exports,"createInterstitialHooks",(function(){return u}));var r=i("jLpHS"),o=i("3vBXL"),s=i("aaWed"),a=i("kPEIC");function u(e,t,n,i,u,c){return{useActionBanners:t=>(0,r.useActionBanners)(t,e,n,i,c),useDismissActionBanner:()=>(0,o.useDismissActionBanner)(e,t),useHasSeenInterstitial:t=>(0,s.useHasSeenInterstitial)(e,u,t),useSetHasSeenInterstitial:t=>(0,a.useSetHasSeenInterstitial)(e,u,t)}}})),i.register("jLpHS",(function(t,n){e(t.exports,"useActionBanners",(function(){return h}),(function(e){return h=e}));var r=i("4xbAj"),o=i("iOvk1"),s=i("43063"),a=i("RVqnc"),u=i("5ekp2"),c=i("10kLD"),l=i("7yXVL"),d=i("2UuBs"),p=i("g5ETd"),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const h=(e,t,n,i,h)=>{const{platform:y,appVersion:m}=e,{data:g}=n.useSelectedMultiChainAccount();return(0,u.useQuery)({queryKey:p.interstitialQueryKeys.actionBanners(null==g?void 0:g.identifier),queryFn:()=>f(void 0,void 0,void 0,(function*(){var e,n,a;const u=null!==(e=null==g?void 0:g.addresses.map(o.chainAddressToCaip19Address))&&void 0!==e?e:[],p=(null==g?void 0:g.type)===r.AccountType.Seed?g.seedIdentifier:null,f=yield(0,l.getDismissedActionBanners)(t),v=null!==(n=(0,c.getSupportedLanguageValue)(s.i18next.language))&&void 0!==n?n:"en";return(0,d.fetchActionBanners)({platform:y,appVersion:m,accountID:null!==(a=null==g?void 0:g.identifier)&&void 0!==a?a:"",deviceId:h.getDeviceId(),dismissedBanners:f,isStaging:i,locale:v,rootId:p,selectedAccountAddresses:u})})),enabled:!!(null==g?void 0:g.identifier),staleTime:(0,a.toMilliseconds)({minutes:1})})}})),i.register("7yXVL",(function(t,n){e(t.exports,"getDismissedActionBanners",(function(){return a}),(function(e){return a=e})),e(t.exports,"setDismissedActionBanners",(function(){return u}),(function(e){return u=e}));var r,o=i("bqmaR"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};(r||(r={})).DismissActionBanners="dismissedActionBanners";const a=e=>s(void 0,void 0,void 0,(function*(){const t=yield e.get(r.DismissActionBanners);return null!=t?t:[]})),u=(e,t)=>s(void 0,void 0,void 0,(function*(){try{const n=yield a(e);if(n.includes(t))return;e.set(r.DismissActionBanners,[...n,t])}catch(e){throw new(0,o.DismissActionBannerError)}}))})),i.register("2UuBs",(function(t,n){e(t.exports,"fetchActionBanners",(function(){return a}),(function(e){return a=e}));var r=i("eanam"),o=i("jeYks"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const a=({accountID:e,appVersion:t,deviceId:n,dismissedBanners:i,isStaging:a,locale:u,platform:c,rootId:l,selectedAccountAddresses:d})=>s(void 0,void 0,void 0,(function*(){const s=yield(0,r.fetchSanityActionBanners)({platform:c,accountID:e,appVersion:t,deviceId:n,isStaging:a,locale:u,rootId:l,selectedAccountAddresses:d});return Object.assign(Object.assign({},s),{banners:s.banners.filter((e=>(0,o.isActionBannerSupported)(e,c)&&!i.includes(e.id)))})}))})),i.register("eanam",(function(t,n){e(t.exports,"fetchSanityActionBanners",(function(){return l}),(function(e){return l=e}));var r=i("beWYh"),o=i("csW2r"),s=i("5Z0Ji"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u={id:void 0,banners:[]};function c(e){const t=[];for(const n in e.errors)Array.isArray(e.errors[n])&&t.push(e.errors[n].join(", "));return t.join(", ")}const l=({accountID:e,appVersion:t,deviceId:n,isStaging:i,locale:l,platform:d,rootId:p,selectedAccountAddresses:f})=>a(void 0,void 0,void 0,(function*(){var a;let h;try{const o=new URL((0,s.SANITY_API_URL)({isStaging:i})),y=JSON.stringify({accountID:e,deviceId:n,locale:l,platform:d,rootId:p,selectedAccountAddresses:f,version:t});let m;if((0,r.isRequestClientEnabled)()){const e=new(0,r.RequestClient);e.withDefaultHeaders({"Content-Type":"application/json"});const t=yield e.post(o.toString(),y);if(400===t.status){const e=c(yield t.data);throw new Error(e)}if(t.status<200||t.status>299)throw new Error(`status code: ${t.status}, body: ${yield t.statusText}`);m=t.data}else{const e=yield fetch(o,{headers:{"Content-Type":"application/json"},method:"POST",body:y});if(h=e.status,!e.ok&&400!==h)throw new Error(`status code: ${e.status}, body: ${yield e.text()}`);if(400===h){const t=c(yield e.json());throw new Error(t)}m=yield e.json()}return m?Object.assign(Object.assign({},m),{banners:null!==(a=m.banners)&&void 0!==a?a:[]}):u}catch(e){return 400===h&&e instanceof Error&&o.telemetry.captureError(e,o.FeatureTag.ActionBanner),u}}))})),i.register("5Z0Ji",(function(t,n){e(t.exports,"SANITY_API_URL",(function(){return r}));const r=({isStaging:e})=>`${(e=>"https://api.phantom.app/banners/get_banners/"+(e?"staging":"prod"))(e)}/v2`})),i.register("jeYks",(function(t,n){e(t.exports,"isActionBannerSupported",(function(){return a}));var r=i("bqmaR"),o=i("9LaZr"),s=i("doyH5");const a=(e,t)=>{const{bannerType:n,destinationType:i}=e;switch(n){case r.ActionBannerType.DirectLink:return(0,o.isActionBannerDestinationSupported)(i);case r.ActionBannerType.BottomSheet:case r.ActionBannerType.Modal:return(0,s.isActionBannerInterstitialSupported)(n,t)&&(0,o.isActionBannerDestinationSupported)(i);default:return!1}}})),i.register("9LaZr",(function(t,n){e(t.exports,"isActionBannerDestinationSupported",(function(){return o}));var r=i("bqmaR");const o=e=>!!e&&Object.values(r.DeepLinkDestination).includes(e)})),i.register("doyH5",(function(t,n){e(t.exports,"isActionBannerInterstitialSupported",(function(){return o}));var r=i("bqmaR");const o=(e,t)=>{switch(e){case r.ActionBannerType.BottomSheet:return"ios"===t||"android"===t;case r.ActionBannerType.Modal:return!0;default:return!1}}})),i.register("g5ETd",(function(t,n){e(t.exports,"ACTION_BANNERS_QUERY_KEY",(function(){return o})),e(t.exports,"interstitialQueryKeys",(function(){return i}));const r="@phantom/interstitials",o=`${r}:action-banners`,i={actionBanners:e=>[o,{accountIdentifier:e}],hasSeenInterstitial:e=>[`${r}:has-seen-interstitial`,{feature:e}]}})),i.register("3vBXL",(function(t,n){e(t.exports,"useDismissActionBanner",(function(){return u}),(function(e){return u=e}));var r=i("9W7fs"),o=i("7yXVL"),s=i("g5ETd"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t)=>(0,r.useMutation)({mutationFn:({actionBannerId:n})=>a(void 0,void 0,void 0,(function*(){(0,o.setDismissedActionBanners)(e,n),t.setQueriesData([s.ACTION_BANNERS_QUERY_KEY],(e=>{if(!e)return;const t=e.banners.filter((e=>e.id!==n));return Object.assign(Object.assign({},e),{banners:t})}))}))})})),i.register("aaWed",(function(t,n){e(t.exports,"useHasSeenInterstitial",(function(){return u}),(function(e){return u=e}));var r=i("5ekp2"),o=i("lqr4n"),s=i("g5ETd"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t,n)=>{const i=s.interstitialQueryKeys.hasSeenInterstitial(n);return(0,r.useQuery)({queryKey:i,queryFn:()=>a(void 0,void 0,void 0,(function*(){return yield o.Interstitials.hasSeen(n,e,t)}))})}})),i.register("kPEIC",(function(t,n){e(t.exports,"useSetHasSeenInterstitial",(function(){return c}),(function(e){return c=e}));var r=i("9W7fs"),o=i("7dHjq"),s=i("lqr4n"),a=i("adKVG"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const c=(e,t,n)=>{const i=(0,o.useQueryClient)();return(0,r.useMutation)({mutationFn:()=>u(void 0,void 0,void 0,(function*(){yield s.Interstitials.setHasSeen(n,e,t),yield(0,a.setHasSeenInterstitial)(i,n,!0)}))})}})),i.register("adKVG",(function(t,n){e(t.exports,"invalidateActionBanners",(function(){return s}),(function(e){return s=e})),e(t.exports,"setHasSeenInterstitial",(function(){return a}),(function(e){return a=e}));var r=i("g5ETd"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const s=e=>o(void 0,void 0,void 0,(function*(){yield e.invalidateQueries([r.ACTION_BANNERS_QUERY_KEY])})),a=(e,t,n)=>o(void 0,void 0,void 0,(function*(){yield e.setQueryData(r.interstitialQueryKeys.hasSeenInterstitial(t),n)}))})),i.register("4QvCM",(function(t,n){e(t.exports,"ActionBannerAnalytics",(function(){return s}),(function(e){return s=e}));var r,o=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},i=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class s{constructor(e){r.set(this,void 0),this.onBannerSeen=e=>{i(this,r,"f").capture("actionBannerSeenByUser",{data:{banner:e}})},this.onBannerClick=e=>{i(this,r,"f").capture("actionBannerClickedByUser",{data:{banner:e}})},this.onBannerDismiss=e=>{i(this,r,"f").capture("actionBannerDismissedByUser",{data:{banner:e}})},this.onInterstitialSeen=e=>{i(this,r,"f").capture("actionBannerInterstitialSeenByUser",{data:{banner:e}})},this.onInterstitialPrimaryClick=e=>{i(this,r,"f").capture("actionBannerInterstitialPrimaryButtonClickedByUser",{data:{banner:e}})},this.onInterstitialSecondaryClick=e=>{i(this,r,"f").capture("actionBannerInterstitialSecondaryButtonClickedByUser",{data:{banner:e}})},this.onInterstitialDismiss=e=>{i(this,r,"f").capture("actionBannerInterstitialDismissedByUser",{data:{banner:e}})},o(this,r,e,"f")}}r=new WeakMap})),i.register("de6RR",(function(t,n){e(t.exports,"generateActionBannerBaseAnalyticsPayload",(function(){return s})),e(t.exports,"generateActionBannerInterstitialAnalyticsPayload",(function(){return a}));var r=i("43063"),o=i("bqmaR");const s=({id:e,humanReadableId:t,description:n,bannerType:r})=>({id:e,humanReadableId:t,description:n,type:r}),a=({id:e,humanReadableId:t,description:n,bannerType:i,interstitial:s})=>{const{title:a,primaryButtonText:u,secondaryButtonText:c}=s;let l;if(i===o.ActionBannerType.Modal)for(const[e,t]of Object.values(s.lineItems).entries())l=Object.assign(Object.assign({},null!=l?l:{}),{[`lineItem${e+1}`]:{title:t.title,description:t.description}});return{id:e,humanReadableId:t,description:n,type:i,interstitial:{title:a,body:l,primaryButtonText:null!=u?u:r.i18next.t("commandContinue"),secondaryButtonText:null!=c?c:r.i18next.t("commandDismiss")}}}})),i.register("hnZYD",(function(t,n){e(t.exports,"QuestAnalytics",(function(){return i("XwkaQ").QuestAnalytics})),e(t.exports,"createQuestHooks",(function(){return i("3ch1m").createQuestHooks})),e(t.exports,"getActiveQuestCount",(function(){return i("l4KjA").getActiveQuestCount})),e(t.exports,"isQuestDisabled",(function(){return i("dKLrt").isQuestDisabled})),e(t.exports,"QUESTS_QUERY_KEY",(function(){return i("9Emft").QUESTS_QUERY_KEY}));i("XwkaQ"),i("jeAV5"),i("3ch1m"),i("l4KjA"),i("dKLrt"),i("9Emft")})),i.register("XwkaQ",(function(t,n){e(t.exports,"QuestAnalytics",(function(){return s}),(function(e){return s=e}));var r,o=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},i=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class s{constructor(e){r.set(this,void 0),this.onQuestSelected=e=>{i(this,r,"f").capture("questSelectedByUser",{data:{quest:e}})},this.onQuestCollectibleMinted=e=>{i(this,r,"f").capture("questCollectibleMinted",{data:{quest:e}})},this.onQuestRewardClaimed=e=>{i(this,r,"f").capture("questRewardClaimedByUser",{data:{quest:e}})},this.onQuestInterstitialPrimaryClick=e=>{i(this,r,"f").capture("questInterstitialPrimaryButtonClickedByUser",{data:{quest:e}})},this.onQuestInterstitialSecondaryClick=e=>{i(this,r,"f").capture("questInterstitialSecondaryButtonClickedByUser",{data:{quest:e}})},this.onQuestInterstitialDismiss=e=>{i(this,r,"f").capture("questInterstitialDismissedByUser",{data:{quest:e}})},this.onQuestPreviewUrlClick=(e,t)=>{i(this,r,"f").capture("questPreviewUrlClickedByUser",{data:{quest:e,url:t}})},o(this,r,e,"f")}}r=new WeakMap})),i.register("jeAV5",(function(t,n){e(t.exports,"CURRENT_UNIX_TIMESTAMP_IN_SECONDS",(function(){return r}));const r=Date.now()/1e3})),i.register("3ch1m",(function(t,n){e(t.exports,"createQuestHooks",(function(){return u}));var r=i("ldbmX"),o=i("4AckS"),s=i("3HrMZ"),a=i("5B97m");function u(e,t,n,i){return{useQuests:t=>(0,s.useQuests)(e(),t,n,i),useCheckQuestStatus:t=>(0,r.useCheckQuestStatus)(e(),t,n),useClaimQuestReward:()=>(0,o.useClaimQuestReward)(e(),t,n),useQuestStatusBadge:e=>(0,a.useQuestStatusBadge)(e)}}})),i.register("ldbmX",(function(t,n){e(t.exports,"useCheckQuestStatus",(function(){return p}),(function(e){return p=e}));var r=i("iOvk1"),o=i("csW2r"),s=i("5ekp2"),a=i("9m4FZ"),u=i("2UXfu"),c=i("9Emft"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const d=new(0,a.CheckQuestStatusError)("Checking quest status failed"),p=(e,t,n)=>{const{data:i}=n.useSelectedMultiChainAccount(),{data:a=[]}=n.useAllMultiChainAccounts(),{appVersion:p,questId:f}=t,h=c.questsQueryKeys.questStatus(p,f);return(0,s.useQuery)({queryFn:()=>l(void 0,void 0,void 0,(function*(){var t;try{const n=null!==(t=null==i?void 0:i.addresses.map(r.chainAddressToCaip19Address))&&void 0!==t?t:[],o=(0,u.generateQuestIdentifiers)(a),s=yield fetch(`${e}/quests/v1/status`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({appVersion:p,questId:f,identifiers:o,selectedAccountAddresses:n})});if(!s.ok)throw d;return yield s.json()}catch(e){throw d}})),queryKey:h,onError:e=>{o.telemetry.captureError(e,o.FeatureTag.Quest)},staleTime:0})}})),i.register("9m4FZ",(function(t,n){var r,o;e(t.exports,"QuestIdentifierType",(function(){return r})),e(t.exports,"ClaimQuestRewardError",(function(){return i})),e(t.exports,"ClaimQuestRewardBadRequestError",(function(){return s})),e(t.exports,"CheckQuestStatusError",(function(){return a})),(o=r||(r={})).ROOT_ID="ROOT_ID",o.ACCOUNT_ID="ACCOUNT_ID";class i extends Error{constructor(e){super(e),this.name="ClaimQuestRewardError"}}class s extends Error{constructor(e){super(e),this.name="ClaimQuestRewardBadRequestError"}}class a extends Error{constructor(e){super(e),this.name="CheckQuestStatusError"}}})),i.register("2UXfu",(function(t,n){e(t.exports,"generateQuestIdentifiers",(function(){return a}));var r=i("4xbAj"),o=i("RVqnc"),s=i("9m4FZ");const a=e=>{const t=new Set,n=[];for(const i of e)switch(i.type){case r.AccountType.Seed:t.has(i.seedIdentifier)||(t.add(i.seedIdentifier),n.push({type:s.QuestIdentifierType.ROOT_ID,id:i.seedIdentifier}));break;case r.AccountType.PrivateKey:case r.AccountType.Ledger:case r.AccountType.SeedVault:t.has(i.identifier)||(t.add(i.identifier),n.push({type:s.QuestIdentifierType.ACCOUNT_ID,id:i.identifier}));break;case r.AccountType.ReadOnly:break;default:(0,o.assertNever)(i)}return n}})),i.register("9Emft",(function(t,n){e(t.exports,"QUESTS_BASE_QUERY_KEY",(function(){return r})),e(t.exports,"QUESTS_QUERY_KEY",(function(){return o})),e(t.exports,"questsQueryKeys",(function(){return i}));const r="@phantom/quests",o=`${r}:quests`,i={quests:(e,t)=>[`${r}:quests`,e,t],questStatus:(e,t)=>[`${r}:questStatus`,e,t]}})),i.register("4AckS",(function(t,n){e(t.exports,"useClaimQuestReward",(function(){return h}),(function(e){return h=e}));var r=i("iOvk1"),o=i("43063"),s=i("csW2r"),a=i("9W7fs"),u=i("10kLD"),c=i("9m4FZ"),l=i("2UXfu"),d=i("9Emft"),p=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const f=new(0,c.ClaimQuestRewardError)("Claiming Reward Failed"),h=(e,t,n)=>{var i;const{data:h}=n.useSelectedMultiChainAccount(),{data:y=[]}=n.useAllMultiChainAccounts(),m=null!==(i=(0,u.getSupportedLanguageValue)(o.i18next.language))&&void 0!==i?i:"en";return(0,a.useMutation)({mutationFn:({questId:t,networkIds:n})=>p(void 0,void 0,void 0,(function*(){var o;try{const i=null==h?void 0:h.addresses.find((e=>n.includes(e.networkID))),s=null!==(o=null==h?void 0:h.addresses.map(r.chainAddressToCaip19Address))&&void 0!==o?o:[],a=(0,l.generateQuestIdentifiers)(y),u=fetch(`${e}/quests/v1/claim_reward`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({questId:t,locale:m,identifiers:a,selectedAccountAddresses:s,walletAddress:{chainId:null==i?void 0:i.networkID,resourceType:r.Caip19ResourceType.address,address:null==i?void 0:i.address}})}),[d]=yield Promise.all([u,new Promise((e=>setTimeout(e,2e3)))]);if(!d.ok){const e=yield d.json();throw new(0,c.ClaimQuestRewardBadRequestError)(JSON.stringify(e))}const p=yield d.json();if("reward_granted"!==p.status)throw f;return p}catch(e){throw e instanceof c.ClaimQuestRewardBadRequestError&&s.telemetry.captureError(e,s.FeatureTag.Quest),f}})),onSuccess:()=>{t.invalidateQueries([`${d.QUESTS_BASE_QUERY_KEY}:quests`])}})}})),i.register("3HrMZ",(function(t,n){e(t.exports,"useQuests",(function(){return f}));var r=i("4xbAj"),o=i("iOvk1"),s=i("43063"),a=i("5ekp2"),u=i("10kLD"),c=i("2UXfu"),l=i("aWR41"),d=i("63urR"),p=i("9Emft");const f=(e,t,n,i)=>{var f;const{platform:h,appVersion:y}=t,{data:m}=n.useSelectedMultiChainAccount(),{data:g=[]}=n.useAllMultiChainAccounts(),{data:v,isLoading:S}=i.useIsAnalyticsOptedOut(),b=null!==(f=(0,u.getSupportedLanguageValue)(s.i18next.language))&&void 0!==f?f:"en";return(0,a.useQuery)({queryKey:p.questsQueryKeys.quests(y,b),enabled:g.length>0&&m&&m.type!==r.AccountType.ReadOnly&&!S,queryFn:()=>{var t;const n=null!==(t=null==m?void 0:m.addresses.map(o.chainAddressToCaip19Address))&&void 0!==t?t:[],r=(0,c.generateQuestIdentifiers)(g),i={appVersion:y,locale:b,platform:h,identifiers:r,selectedAccountAddresses:n,isOptedOut:!!v};return(0,d.getQuests)(e,i)},select:e=>(0,l.getValidQuests)(e,m),refetchOnMount:"extension"!==h||"always"})}})),i.register("aWR41",(function(t,n){e(t.exports,"getValidQuests",(function(){return s}));var r=i("a2yRh"),o=i("aVeEH");const s=(e,t)=>e.filter((e=>!(0,r.questExpired)(e)&&(0,o.questSupportedByAccount)(e,t)))})),i.register("a2yRh",(function(t,n){e(t.exports,"questExpired",(function(){return o}));var r=i("jeAV5");const o=e=>r.CURRENT_UNIX_TIMESTAMP_IN_SECONDS>e.expirationUnixTimeInSeconds})),i.register("aVeEH",(function(t,n){e(t.exports,"questSupportedByAccount",(function(){return r}));const r=(e,t)=>{var n;const r=null!==(n=null==t?void 0:t.addresses.map((e=>e.networkID)))&&void 0!==n?n:[];for(const t of Object.values(e.networkIds))if(r.includes(t))return!0;return!1}})),i.register("63urR",(function(t,n){e(t.exports,"getQuests",(function(){return o}),(function(e){return o=e}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const o=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${e}/quests/v1`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to fetch quests");return(yield n.json()).quests}catch(e){return[]}}))})),i.register("5B97m",(function(t,n){e(t.exports,"useQuestStatusBadge",(function(){return a}));var r=i("43063"),o=i("RVqnc"),s=i("29o0l");const a=e=>{const{expirationUnixTimeInSeconds:t,isCompleted:n,isPreview:i,platform:a}=e,{t:u}=(0,r.useTranslation)(),c=(0,s.useMemo)((()=>{const{days:e,seconds:r}=(0,o.formatUnixTimestampToDaysFromNow)(t);return i?{color:"rgba(33, 229, 111, 1)",text:u("extension"===a?"questsBadgeMobileOnly":"questsBadgeExtensionOnly")}:n?{color:"rgba(33, 229, 111, 1)",text:u("pastParticipleCompleted")}:0===e&&r>0?{color:"rgba(235, 55, 66, 1)",text:u("questsDaysLessThanOneDay")}:e>=1&&e<=5?{color:"rgba(235, 55, 66, 1)",text:u(1===e?"questsDaysLeftSingular":"questsDaysLeft",{days:e})}:{color:"rgba(229, 162, 33, 1)",text:u("questsDaysLeft",{days:e})}}),[t,n,i,a,u]);return(0,s.useMemo)((()=>({status:c})),[c])}})),i.register("l4KjA",(function(t,n){e(t.exports,"getActiveQuestCount",(function(){return r}));const r=e=>e.filter((e=>{var t;return!e.isPreview&&!(null===(t=e.reward)||void 0===t?void 0:t.hasClaimed)})).length})),i.register("dKLrt",(function(t,n){e(t.exports,"isQuestDisabled",(function(){return r}));const r=e=>{const{isPreview:t,isCompleted:n,reward:r}=e;return t||n&&null!=r&&r.hasClaimed}})),i.register("41yT6",(function(n,r){e(n.exports,"useQuery",(function(){return y})),e(n.exports,"useMutation",(function(){return m})),e(n.exports,"queryClient",(function(){return g})),e(n.exports,"QueryProvider",(function(){return S}));var o=i("fYHWK"),s=i("kkyJd"),a=i("9W7fs"),u=i("5ekp2"),c=i("1VmTz"),l=i("eBByC"),d=i("7tlR0"),p=i("29o0l"),f=i("iJRtg"),h=i("asCzf");function y(e){return(0,u.useQuery)(e)}function m(e){return(0,a.useMutation)(e)}const g=new(0,s.QueryClient)({defaultOptions:{mutations:{retry:!1,networkMode:"offlineFirst"},queries:{retry:!1,staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1,networkMode:"offlineFirst"}}}),v=(0,o.createAsyncStoragePersister)(Object.assign(Object.assign({},(0,h.createReactQueryCache)()),{throttleTime:1e3,retry:d.removeOldestQuery})),S=e=>{const n={shouldDehydrateQuery:f.shouldDehydrateQuery};return t(p).createElement(l.PersistQueryClientProvider,{client:g,persistOptions:{persister:v,dehydrateOptions:n,buster:b,maxAge:1/0}},e.children,t(p).createElement(c.ReactQueryDevtools,{initialIsOpen:!1,position:"top-right"}))},b="23.13.0"})),i.register("fYHWK",(function(t,n){e(t.exports,"createAsyncStoragePersister",(function(){return o}));var r=i("fXaak");const o=({storage:e,key:t="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:o=JSON.stringify,deserialize:i=JSON.parse,retry:a})=>{if(void 0!==e){const s=async n=>{try{await e.setItem(t,o(n))}catch(e){return e}};return{persistClient:(0,r.asyncThrottle)((async e=>{let t=e,n=await s(t),r=0;for(;n&&t;)r++,t=await(null==a?void 0:a({persistedClient:t,error:n,errorCount:r})),t&&(n=await s(t))}),{interval:n}),restoreClient:async()=>{const n=await e.getItem(t);if(n)return i(n)},removeClient:()=>e.removeItem(t)}}return{persistClient:s,restoreClient:()=>Promise.resolve(void 0),removeClient:s}};function s(){}})),i.register("fXaak",(function(t,n){e(t.exports,"asyncThrottle",(function(){return o}));const r=()=>{};function o(e,{interval:t=1e3,onError:n=r}={}){if("function"!=typeof e)throw new Error("argument is not function.");let o,i=!1,s=0,a=null;const u=async()=>{if(a){const t=a;a=null;try{i=!0,await e(...t)}catch(e){n(e)}finally{s=Date.now(),i=!1}}},c=async()=>{clearTimeout(o),o=setTimeout((()=>{i?c():u()}),t)};return(...e)=>{a=e;const n=Date.now()-s<t;i||n?c():u()}}})),i.register("kkyJd",(function(t,n){e(t.exports,"QueryClient",(function(){return p}));var r=i("iKKzk"),o=i("bEFfr"),s=i("7CTMq"),a=i("ixnow"),u=i("kKX7c"),c=i("4nwh4"),l=i("cccYE"),d=i("72SXf");class p{mount(){this.unsubscribeFocus=a.focusManager.subscribe((()=>{a.focusManager.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())})),this.unsubscribeOnline=u.onlineManager.subscribe((()=>{u.onlineManager.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)}isFetching(e,t){const[n]=(0,r.parseFilterArgs)(e,t);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data}getQueriesData(e){return this.getQueryCache().findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,n){const o=this.queryCache.find(e),i=null==o?void 0:o.state.data,s=(0,r.functionalUpdate)(t,i);if(void 0===s)return;const a=(0,r.parseQueryArgs)(e),u=this.defaultQueryOptions(a);return this.queryCache.build(this,u).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return c.notifyManager.batch((()=>this.getQueryCache().findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,n)]))))}getQueryState(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state}removeQueries(e,t){const[n]=(0,r.parseFilterArgs)(e,t),o=this.queryCache;c.notifyManager.batch((()=>{o.findAll(n).forEach((e=>{o.remove(e)}))}))}resetQueries(e,t,n){const[o,i]=(0,r.parseFilterArgs)(e,t,n),s=this.queryCache,a={type:"active",...o};return c.notifyManager.batch((()=>(s.findAll(o).forEach((e=>{e.reset()})),this.refetchQueries(a,i))))}cancelQueries(e,t,n){const[o,i={}]=(0,r.parseFilterArgs)(e,t,n);void 0===i.revert&&(i.revert=!0);const s=c.notifyManager.batch((()=>this.queryCache.findAll(o).map((e=>e.cancel(i)))));return Promise.all(s).then(r.noop).catch(r.noop)}invalidateQueries(e,t,n){const[o,i]=(0,r.parseFilterArgs)(e,t,n);return c.notifyManager.batch((()=>{var e,t;if(this.queryCache.findAll(o).forEach((e=>{e.invalidate()})),"none"===o.refetchType)return Promise.resolve();const n={...o,type:null!=(e=null!=(t=o.refetchType)?t:o.type)?e:"active"};return this.refetchQueries(n,i)}))}refetchQueries(e,t,n){const[o,i]=(0,r.parseFilterArgs)(e,t,n),s=c.notifyManager.batch((()=>this.queryCache.findAll(o).filter((e=>!e.isDisabled())).map((e=>{var t;return e.fetch(void 0,{...i,cancelRefetch:null==(t=null==i?void 0:i.cancelRefetch)||t,meta:{refetchPage:o.refetchPage}})}))));let a=Promise.all(s).then(r.noop);return null!=i&&i.throwOnError||(a=a.catch(r.noop)),a}fetchQuery(e,t,n){const o=(0,r.parseQueryArgs)(e,t,n),i=this.defaultQueryOptions(o);void 0===i.retry&&(i.retry=!1);const s=this.queryCache.build(this,i);return s.isStaleByTime(i.staleTime)?s.fetch(i):Promise.resolve(s.state.data)}prefetchQuery(e,t,n){return this.fetchQuery(e,t,n).then(r.noop).catch(r.noop)}fetchInfiniteQuery(e,t,n){const o=(0,r.parseQueryArgs)(e,t,n);return o.behavior=(0,l.infiniteQueryBehavior)(),this.fetchQuery(o)}prefetchInfiniteQuery(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(r.noop).catch(r.noop)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const n=this.queryDefaults.find((t=>(0,r.hashQueryKey)(e)===(0,r.hashQueryKey)(t.queryKey)));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find((t=>(0,r.partialMatchKey)(e,t.queryKey)));return null==t?void 0:t.defaultOptions}setMutationDefaults(e,t){const n=this.mutationDefaults.find((t=>(0,r.hashQueryKey)(e)===(0,r.hashQueryKey)(t.mutationKey)));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find((t=>(0,r.partialMatchKey)(e,t.mutationKey)));return null==t?void 0:t.defaultOptions}defaultQueryOptions(e){if(null!=e&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(null==e?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=(0,r.hashQueryKeyByOptions)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.useErrorBoundary&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return null!=e&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==e?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}constructor(e={}){this.queryCache=e.queryCache||new(0,o.QueryCache),this.mutationCache=e.mutationCache||new(0,s.MutationCache),this.logger=e.logger||d.defaultLogger,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}}})),i.register("bEFfr",(function(t,n){e(t.exports,"QueryCache",(function(){return u}));var r=i("iKKzk"),o=i("lS8qk"),s=i("4nwh4"),a=i("5rODI");class u extends a.Subscribable{build(e,t,n){var i;const s=t.queryKey,a=null!=(i=t.queryHash)?i:(0,r.hashQueryKeyByOptions)(s,t);let u=this.get(a);return u||(u=new(0,o.Query)({cache:this,logger:e.getLogger(),queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s),meta:t.meta}),this.add(u)),u}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter((t=>t!==e)),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){s.notifyManager.batch((()=>{this.queries.forEach((e=>{this.remove(e)}))}))}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[n]=(0,r.parseFilterArgs)(e,t);return void 0===n.exact&&(n.exact=!0),this.queries.find((e=>(0,r.matchQuery)(n,e)))}findAll(e,t){const[n]=(0,r.parseFilterArgs)(e,t);return Object.keys(n).length>0?this.queries.filter((e=>(0,r.matchQuery)(n,e))):this.queries}notify(e){s.notifyManager.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){s.notifyManager.batch((()=>{this.queries.forEach((e=>{e.onFocus()}))}))}onOnline(){s.notifyManager.batch((()=>{this.queries.forEach((e=>{e.onOnline()}))}))}constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}}})),i.register("lS8qk",(function(t,n){e(t.exports,"Query",(function(){return c}));var r=i("iKKzk"),o=i("72SXf"),s=i("4nwh4"),a=i("7bSUD"),u=i("vxiv0");class c extends u.Removable{setOptions(e){this.options={...this.defaultOptions,...e},this.meta=null==e?void 0:e.meta,this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(e,t){const n=(0,r.replaceData)(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(r.noop).catch(r.noop):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some((e=>!1!==e.options.enabled))}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((e=>e.getCurrentResult().isStale))}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,r.timeUntilStale)(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find((e=>e.shouldFetchOnWindowFocus()));t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}onOnline(){var e;const t=this.observers.find((e=>e.shouldFetchOnReconnect()));t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}addObserver(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var n,o;if("idle"!==this.state.fetchStatus)if(this.state.dataUpdatedAt&&null!=t&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return null==(i=this.retryer)||i.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}Array.isArray(this.options.queryKey);const s=(0,r.getAbortController)(),u={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},c=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>{if(s)return this.abortSignalConsumed=!0,s.signal}})};c(u);const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(u)):Promise.reject("Missing queryFn"),meta:this.meta};var d;(c(l),null==(n=this.options.behavior)||n.onFetch(l),this.revertState=this.state,"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(o=l.fetchOptions)?void 0:o.meta))&&this.dispatch({type:"fetch",meta:null==(d=l.fetchOptions)?void 0:d.meta});const p=e=>{var t,n;((0,a.isCancelledError)(e)&&e.silent||this.dispatch({type:"error",error:e}),(0,a.isCancelledError)(e))||(null==(t=(n=this.cache.config).onError)||t.call(n,e,this));this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=(0,a.createRetryer)({fn:l.fetchFn,abort:null==s?void 0:s.abort.bind(s),onSuccess:e=>{var t,n;void 0!==e?(this.setData(e),null==(t=(n=this.cache.config).onSuccess)||t.call(n,e,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1):p(new Error("undefined"))},onError:p,onFail:()=>{this.dispatch({type:"failed"})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){this.state=(t=>{var n,r;switch(e.type){case"failed":return{...t,fetchFailureCount:t.fetchFailureCount+1};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchMeta:null!=(n=e.meta)?n:null,fetchStatus:(0,a.canFetch)(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(r=e.dataUpdatedAt)?r:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0}};case"error":const o=e.error;return(0,a.isCancelledError)(o)&&o.revert&&this.revertState?{...this.revertState}:{...t,error:o,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),s.notifyManager.batch((()=>{this.observers.forEach((t=>{t.onQueryUpdate(e)})),this.cache.notify({query:this,type:"updated",action:e})}))}constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||o.defaultLogger,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==e.initialData?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,r=void 0!==t;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.meta=e.meta}}})),i.register("7CTMq",(function(t,n){e(t.exports,"MutationCache",(function(){return u}));var r=i("4nwh4"),o=i("lOsKv"),s=i("iKKzk"),a=i("5rODI");class u extends a.Subscribable{build(e,t,n){const r=new(0,o.Mutation)({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(r),r}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter((t=>t!==e)),this.notify({type:"removed",mutation:e})}clear(){r.notifyManager.batch((()=>{this.mutations.forEach((e=>{this.remove(e)}))}))}getAll(){return this.mutations}find(e){return void 0===e.exact&&(e.exact=!0),this.mutations.find((t=>(0,s.matchMutation)(e,t)))}findAll(e){return this.mutations.filter((t=>(0,s.matchMutation)(e,t)))}notify(e){r.notifyManager.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.mutations.filter((e=>e.state.isPaused));return r.notifyManager.batch((()=>e.reduce(((e,t)=>e.then((()=>t.continue().catch(s.noop)))),Promise.resolve())))}constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}}})),i.register("1VmTz",(function(t,n){e(t.exports,"ReactQueryDevtools",(function(){return r}));const r=function(){return null}})),i.register("eBByC",(function(t,n){e(t.exports,"PersistQueryClientProvider",(function(){return c}));var r=i("90fwX"),o=i("29o0l"),s=i("kJsYu"),a=i("8mX7P"),u=i("7dHjq");const c=({client:e,children:t,persistOptions:n,onSuccess:i,...c})=>{const[l,d]=o.useState(!0),p=o.useRef({persistOptions:n,onSuccess:i});return o.useEffect((()=>{p.current={persistOptions:n,onSuccess:i}})),o.useEffect((()=>{let t=!1;d(!0);const[n,r]=(0,s.persistQueryClient)({...p.current.persistOptions,queryClient:e});return r.then((()=>{t||(null==p.current.onSuccess||p.current.onSuccess(),d(!1))})),()=>{t=!0,n()}}),[e]),o.createElement(u.QueryClientProvider,(0,r.extends)({client:e},c),o.createElement(a.IsRestoringProvider,{value:l},t))}})),i.register("90fwX",(function(t,n){function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}e(t.exports,"extends",(function(){return r}))})),i.register("kJsYu",(function(t,n){e(t.exports,"persistQueryClient",(function(){return s}));var r=i("93Hhe");async function o({queryClient:e,persister:t,buster:n="",dehydrateOptions:o}){const i={buster:n,timestamp:Date.now(),clientState:(0,r.dehydrate)(e,o)};await t.persistClient(i)}function s(e){let t,n=!1;const i=async function({queryClient:e,persister:t,maxAge:n=864e5,buster:o="",hydrateOptions:i}){try{const s=await t.restoreClient();if(s)if(s.timestamp){const a=Date.now()-s.timestamp>n,u=s.buster!==o;a||u?t.removeClient():(0,r.hydrate)(e,s.clientState,i)}else t.removeClient()}catch(e){t.removeClient()}}(e).then((()=>{n||(t=function(e){const t=e.queryClient.getQueryCache().subscribe((()=>{o(e)})),n=e.queryClient.getMutationCache().subscribe((()=>{o(e)}));return()=>{t(),n()}}(e))}));return[()=>{n=!0,null==t||t()},i]}})),i.register("93Hhe",(function(t,n){function r(e){return e.state.isPaused}function o(e){return"success"===e.state.status}function i(e,t={}){const n=[],i=[];if(!1!==t.dehydrateMutations){const o=t.shouldDehydrateMutation||r;e.getMutationCache().getAll().forEach((e=>{o(e)&&n.push(function(e){return{mutationKey:e.options.mutationKey,state:e.state}}(e))}))}if(!1!==t.dehydrateQueries){const n=t.shouldDehydrateQuery||o;e.getQueryCache().getAll().forEach((e=>{n(e)&&i.push(function(e){return{state:e.state,queryKey:e.queryKey,queryHash:e.queryHash}}(e))}))}return{mutations:n,queries:i}}function s(e,t,n){if("object"!=typeof t||null===t)return;const r=e.getMutationCache(),o=e.getQueryCache(),i=t.mutations||[],s=t.queries||[];i.forEach((t=>{var o;r.build(e,{...null==n||null==(o=n.defaultOptions)?void 0:o.mutations,mutationKey:t.mutationKey},t.state)})),s.forEach((t=>{var r;const i=o.get(t.queryHash);i?i.state.dataUpdatedAt<t.state.dataUpdatedAt&&i.setState(t.state):o.build(e,{...null==n||null==(r=n.defaultOptions)?void 0:r.queries,queryKey:t.queryKey,queryHash:t.queryHash},t.state)}))}e(t.exports,"dehydrate",(function(){return i})),e(t.exports,"hydrate",(function(){return s}))})),i.register("7tlR0",(function(t,n){e(t.exports,"removeOldestQuery",(function(){return r}));const r=({persistedClient:e})=>{const t=[...e.clientState.mutations],n=[...e.clientState.queries],r={...e,clientState:{mutations:t,queries:n}},o=[...n].sort(((e,t)=>e.state.dataUpdatedAt-t.state.dataUpdatedAt));if(o.length>0){const e=o.shift();return r.clientState.queries=n.filter((t=>t!==e)),r}}})),i.register("iJRtg",(function(t,n){e(t.exports,"shouldDehydrateQuery",(function(){return y}));var r=i("21aqi");i("hM5LD");var o=i("hSXsO");i("bBa7X");var s=i("7SrdS");i("fVtZG");var a=i("1z0aW");i("ibwoK");var u=i("g5ETd");i("hnZYD");var c=i("9Emft"),l=i("kram9"),d=i("7gANb"),p=i("3FEtE");const f=()=>!0,h={SPLTokenCollectibleCollections:f,SPLTokenJSONMetadata:f,tokens:f,prices:f,collectibles:r.collectiblesShouldDehydrateQueryPredicate,swapper:l.swapperShouldDehydrateQueryPredicate,transferFungibleLoggingContext:f,[d.TRANSACTIONS_TIMESTAMPS_QUERY_KEY]:f,[u.ACTION_BANNERS_QUERY_KEY]:f,[s.FIAT_RAMP_FUNGIBLES_QUERY_KEY]:f,[p.WALLET_SCREEN_ACTION_QUERY_KEY]:f,[a.InfiniteHistoryItemsKey]:f,[c.QUESTS_QUERY_KEY]:f,[o.EXPLORE_BASE_QUERY_KEY]:f},y=e=>{if(0===e.queryKey.length)return!1;const t=String(e.queryKey[0]);return!!h[t]&&h[t](e)}})),i.register("fVtZG",(function(t,n){e(t.exports,"InfiniteHistoryItemsKey",(function(){return i("1z0aW").InfiniteHistoryItemsKey})),e(t.exports,"useFetchInfiniteHistoryItems",(function(){return i("1z0aW").useFetchInfiniteHistoryItems})),e(t.exports,"useFetchRefreshInfiniteHistoryItems",(function(){return i("1z0aW").useFetchRefreshInfiniteHistoryItems})),e(t.exports,"useRefreshHistory",(function(){return i("2zIBD").useRefreshHistory})),e(t.exports,"createHistoryRowLabels",(function(){return i("h5LSS").createHistoryRowLabels})),e(t.exports,"createPendingTransactionRowLabels",(function(){return i("h5LSS").createPendingTransactionRowLabels})),e(t.exports,"getAccountsWithFilter",(function(){return i("h5LSS").getAccountsWithFilter})),e(t.exports,"isCollectibleTokenType",(function(){return i("h5LSS").isCollectibleTokenType})),e(t.exports,"isSpamTransaction",(function(){return i("h5LSS").isSpamTransaction})),e(t.exports,"isReceiveTransaction",(function(){return i("h5LSS").isReceiveTransaction})),e(t.exports,"extractAddressfromBri",(function(){return i("12SBp").extractAddressfromBri}));i("5nl69"),i("1z0aW"),i("2zIBD"),i("h5LSS"),i("12SBp")})),i.register("5nl69",(function(t,n){e(t.exports,"HistoryItemsFetchCacheBustError",(function(){return l}),(function(e){return l=e})),e(t.exports,"fetchHistoryItems",(function(){return g}),(function(e){return g=e}));var r=i("csW2r"),o=i("RVqnc"),s=i("16XMG"),a=i("7XqVB"),u=i("12SBp"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};class l extends Error{constructor(){super(...arguments),this.message="406: Cache bust!"}}class d extends Error{constructor(){super(...arguments),this.message="Server response malformed."}}class p extends Error{}class f extends Error{}const h=a.z.object({next:a.z.union([a.z.null(),a.z.string()]),results:a.z.array(u.HistoryItem)}),y=e=>c(void 0,void 0,void 0,(function*(){const t=yield(0,o.withRetry)((()=>fetch(`${(0,s.getAPIEnvironment)()}/history/v2`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),(()=>!0));if(406===t.status)throw new l;if(t.status>=400&&t.status<500)throw new f(`FetchHistoryItem: Status code: ${t.status}`);if(t.status>=500)throw new p(`FetchHistoryItem: Status code: ${t.status}`);return yield t.json()})),m=e=>!Array.isArray(e.results)||"string"!=typeof e.next&&null!==e.next,g=e=>c(void 0,void 0,void 0,(function*(){var t;const n=yield y(e);if(m(n))throw new d;for(;(null===(t=n.results)||void 0===t?void 0:t.length)<10&&n.next;){if(m(n))throw new d;const e=yield y({next:n.next});n.next=e.next,n.results=[...n.results,...e.results]}try{return h.parse(n)}catch(e){const t=e,o=[],i=t.issues;for(let e=0;e<i.length;++e){const n=i[e].path;if("results"!==n[0])throw r.telemetry.captureError(t,r.FeatureTag.History),t;const s=n[1];if("number"!=typeof s)throw r.telemetry.captureError(t,r.FeatureTag.History),t;o.push(s)}o.sort((function(e,t){return t-e}));const s=o.map((e=>n.results[e])).map((e=>{var t;return(null===(t=e.interactionData)||void 0===t?void 0:t.transactionType)||""})),a=[];for(let e=0;e<o.length;++e){const t=o[e],r=n.results[t],i={timestamp:null==r?void 0:r.timestamp,owner:null==r?void 0:r.owner,id:null==r?void 0:r.id,chainMeta:null==r?void 0:r.chainMeta,interactionData:{transactionType:"UNCLASSIFIED_APP_INTERACTION",balanceChanges:[]}};try{u.HistoryItem.parse(i),n.results[t]=i,a.push(t)}catch(e){}}for(let e=0;e<o.length;++e){const t=o[e];-1===a.indexOf(t)&&n.results.splice(t,1)}o.length&&console.error(`Removed history items, ${s.join(",")}`);try{return h.parse(n)}catch(e){const t=e;throw r.telemetry.captureError(t,r.FeatureTag.History),t}}}))})),i.register("12SBp",(function(t,n){e(t.exports,"HistoryItem",(function(){return J})),e(t.exports,"extractAddressfromBri",(function(){return Z}));var r=i("iOvk1"),o=i("7gANb"),s=i("7XqVB");const a=s.z.enum(["Native","Fungible","SemiFungible","NonFungible","Unknown"]),u=s.z.object({id:s.z.string(),displayName:s.z.string().optional(),logoURI:s.z.union([s.z.string(),s.z.null()]).optional(),tokenType:a,decimals:s.z.number().optional(),symbol:s.z.string().optional(),isSpam:s.z.boolean().optional()}),c=s.z.object({id:r.BRI,displayName:s.z.string(),logoURI:s.z.union([s.z.string(),s.z.null()]).optional()}),l=s.z.object({token:u,amount:s.z.string(),to:r.BRI,from:r.BRI}),d=s.z.literal("UNCLASSIFIED_APP_INTERACTION"),p=s.z.literal("TOKEN_SEND"),f=s.z.literal("TOKEN_BURN"),h=s.z.literal("TOKEN_SWAP"),y=s.z.literal("TOKEN_UNWRAP"),m=s.z.literal("WITHDRAW_STAKE"),g=s.z.literal("DEACTIVATE_STAKE"),v=s.z.literal("STAKE"),S=s.z.literal("COLLECTIBLE_LIST"),b=s.z.literal("COLLECTIBLE_BUY_ITEM"),w=s.z.literal("COLLECTIBLE_CANCEL_BID"),E=s.z.literal("COLLECTIBLE_BID_ITEM"),x=s.z.literal("COLLECTIBLE_UNLIST"),A=s.z.literal("COLLECTIBLE_SELL_ITEM"),T=s.z.literal("CANCEL_TX"),C=s.z.literal("TOKEN_APPROVAL"),I=s.z.literal("CANCEL_ORDER"),k=s.z.literal("COLLECTION_APPROVAL"),O=s.z.literal("BRIDGE_INIT"),D=(s.z.union([d,p,f,h,y,m,g,v,S,b,w,E,x,A,T,C,I,k,O]),s.z.object({transactionType:d,balanceChanges:s.z.array(l),dapp:s.z.union([o.Dapp,s.z.null()]).optional()})),L=s.z.object({transactionType:p,balanceChanges:s.z.array(l).nonempty(),dapp:s.z.union([o.Dapp,s.z.null()]).optional()}),R=s.z.object({transactionType:f,dapp:s.z.union([o.Dapp,s.z.null()]).optional(),token:u,amount:s.z.string()}),F=s.z.object({transactionType:h,dapp:s.z.union([o.Dapp,s.z.null()]).optional(),receiveToken:u,sendToken:u,receiveAmount:s.z.string(),sendAmount:s.z.string()}),B=s.z.object({transactionType:y,token:u,amount:s.z.string()}),q=s.z.object({transactionType:m,stakeAccount:r.BRI,amount:s.z.string()}),Q=s.z.object({transactionType:g,stakeAccount:r.BRI,amount:s.z.string()}),M=s.z.object({transactionType:v,stakeAccount:r.BRI,amount:s.z.string(),validatorName:s.z.string(),validatorWebsite:s.z.string(),keybaseUsername:s.z.string()}),P=s.z.object({transactionType:T}),N=s.z.object({dapp:s.z.union([o.Dapp,s.z.null()]),itemAmount:s.z.string().optional(),item:u,forAmount:s.z.string(),forAsset:u,listingUrl:s.z.string().optional()}),_=N.merge(s.z.object({transactionType:S})),U=N.merge(s.z.object({transactionType:b})),K=N.merge(s.z.object({transactionType:w})),j=N.merge(s.z.object({transactionType:E})),z=N.merge(s.z.object({transactionType:x})),H=N.merge(s.z.object({transactionType:A})),V=s.z.object({transactionType:C,dapp:s.z.union([o.Dapp,s.z.null()]).optional(),token:u,value:s.z.string().optional(),isApproved:s.z.boolean()}),$=s.z.object({transactionType:I,dapp:s.z.union([o.Dapp,s.z.null()]).optional(),orderId:s.z.string()}),Y=s.z.object({transactionType:k,collection:c,dapp:s.z.union([o.Dapp,s.z.null()]).optional(),isApproved:s.z.boolean()}),W=s.z.object({transactionType:O,dapp:s.z.union([o.Dapp,s.z.null()]).optional(),balanceChanges:s.z.array(l).nonempty(),explorerUrl:s.z.string().optional()}),X=s.z.enum(["success","failed"]),G=s.z.object({networkFee:s.z.string().optional(),networkFeePayer:s.z.string().optional(),status:X,errorMessage:s.z.union([s.z.string(),s.z.null()]),blockNumber:s.z.string(),chainId:r.NetworkID,transactionId:s.z.string()}),J=s.z.object({timestamp:s.z.number(),owner:r.BRI,id:r.BRI,interactionData:s.z.union([D,L,R,F,B,q,Q,M,_,U,K,j,z,H,P,V,$,Y,W]),chainMeta:G}),Z=e=>{const t=e.split("/")[1],n=null==t?void 0:t.split(":");return n&&n[1]}})),i.register("1z0aW",(function(t,n){e(t.exports,"InfiniteHistoryItemsKey",(function(){return p}),(function(e){return p=e})),e(t.exports,"infiniteHistoryItemsQueryKey",(function(){return f}),(function(e){return f=e})),e(t.exports,"useFetchInfiniteHistoryItems",(function(){return h}),(function(e){return h=e})),e(t.exports,"useFetchRefreshInfiniteHistoryItems",(function(){return y}),(function(e){return y=e}));var r=i("iOvk1"),o=i("csW2r"),s=i("wGjeD"),a=i("5ekp2"),u=i("7dHjq"),c=i("29o0l"),l=i("5nl69"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const p="fetch-infinite-history-items",f=e=>[p,e],h=e=>{const t=(0,u.useQueryClient)();(0,c.useEffect)((()=>{const n=f(e),r=t.getQueryState(n,{exact:!0,fetchStatus:"fetching"});(null==r?void 0:r.data)&&t.removeQueries(n,{exact:!0})}),[t,e]),(0,c.useEffect)((()=>()=>{t.cancelQueries([p],{exact:!1})}),[t]);const n=(0,s.useInfiniteQuery)(f(e),(({pageParam:t})=>d(void 0,void 0,void 0,(function*(){return t?yield(0,l.fetchHistoryItems)({next:t}):yield(0,l.fetchHistoryItems)({accounts:e||[]})}))),{getNextPageParam:e=>e.next,cacheTime:1/0,staleTime:1/0,retry:!1,enabled:!!(null==e?void 0:e.length)&&e.every((e=>!r.Chains.isLocalNetworkID(e.chainId))),onError:n=>{n instanceof l.HistoryItemsFetchCacheBustError&&((e,t)=>{e.removeQueries(t,{exact:!0})})(t,f(e)),o.telemetry.captureError(n,o.FeatureTag.History)}});return n},y=e=>{var t,n;const i=(0,u.useQueryClient)(),s=i.getQueryState(f(e),{exact:!0}),h=null===(n=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.pages[0])||void 0===n?void 0:n.results[0],y=(0,a.useQuery)(((e,t)=>["refresh-fetch-infinite-history-items",e,t])(e,null==h?void 0:h.id),(({queryKey:[,e,t]})=>d(void 0,void 0,void 0,(function*(){return Date.now()-((null==s?void 0:s.dataUpdatedAt)||0)<500?null:t?yield(0,l.fetchHistoryItems)({accounts:e||[],latestTransactionStored:t}):yield(0,l.fetchHistoryItems)({accounts:e||[]})}))),{cacheTime:0,staleTime:0,retry:!1,enabled:!!s&&"loading"!==s.status&&!!(null==e?void 0:e.length)&&e.every((e=>!r.Chains.isLocalNetworkID(e.chainId))),onError:e=>o.telemetry.captureError(e,o.FeatureTag.History)});return(0,c.useEffect)((()=>{var t;if(null===(t=y.data)||void 0===t?void 0:t.results.length){const t=y.data;i.cancelQueries([p],{exact:!1}),i.setQueryData([p,e],(()=>({pages:[t],pageParams:[]})))}}),[y.data,i,e]),y}})),i.register("2zIBD",(function(t,n){e(t.exports,"useRefreshHistory",(function(){return l}),(function(e){return l=e}));var r=i("iOvk1"),o=i("RVqnc"),s=i("7dHjq"),a=i("29o0l"),u=i("1z0aW"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const l=(e,t)=>{const[n,i]=(0,a.useState)(0),[l,d]=(0,a.useState)(!1),p=(0,s.useQueryClient)().getQueryData((0,u.infiniteHistoryItemsQueryKey)(e),{exact:!0}),f=(0,a.useMemo)((()=>(null==p?void 0:p.pages[0].results.map((e=>e.chainMeta.transactionId)))||[]),[null==p?void 0:p.pages]),{refetch:h,isError:y,isFetching:m}=(0,u.useFetchRefreshInfiniteHistoryItems)(e);return(0,a.useEffect)((()=>{let e=0;!function(){var n;c(this,void 0,void 0,(function*(){let s=[];function a(e){return t.some((t=>{const n=e.length?e:f;switch(t.networkID){case r.NetworkIDs.Ethereum.Mainnet:case r.NetworkIDs.Ethereum.Goerli:case r.NetworkIDs.Ethereum.Sepolia:case r.NetworkIDs.Polygon.Mainnet:case r.NetworkIDs.Polygon.Mumbai:return!n.includes(t.data.transactions[t.data.transactions.length-1].hash);case r.NetworkIDs.Solana.Mainnet:case r.NetworkIDs.Solana.Testnet:case r.NetworkIDs.Solana.Devnet:case r.NetworkIDs.Solana.Localnet:return!n.includes(t.data.signature);case r.NetworkIDs.Bitcoin.Mainnet:case r.NetworkIDs.Bitcoin.Testnet:return!n.includes(t.data.txID);default:return(0,o.assertNever)(t)}}))}if(a(s)){for(i((e=>e+1));e<5&&a(s);)try{const t=yield h();s=(null===(n=t.data)||void 0===n?void 0:n.results.map((e=>e.chainMeta.transactionId)))||[],++e}catch(e){}i((e=>e-1))}}))}()}),[t,f,h]),(0,a.useEffect)((()=>{d(n>0)}),[n]),{refresh:h,isRefreshError:y,isRefreshing:m,isRefreshingConfirmedTxs:l}}})),i.register("h5LSS",(function(n,r){e(n.exports,"createHistoryRowLabels",(function(){return p})),e(n.exports,"isReceiveTransaction",(function(){return g})),e(n.exports,"isCollectibleTokenType",(function(){return y})),e(n.exports,"createPendingTransactionRowLabels",(function(){return f})),e(n.exports,"getAccountsWithFilter",(function(){return h})),e(n.exports,"isSpamTransaction",(function(){return m}));var o=i("iOvk1"),s=i("bO44J"),a=i("7gANb"),u=i("RVqnc"),c=i("29o0l"),l=i("Nt4tV"),d=i("12SBp");const p=(e,n,r,i,a)=>{var p;const{interactionData:f,chainMeta:h}=e,{transactionType:m}=f,v="failed"===h.status,S=h.chainId,{symbol:b}=s.NATIVE_TOKEN_MAP[S],w=n("historyUnknownDappName"),E=t(c).createElement(r,{historyItem:e,size:"small",isDetailViewOrSvg:!1});switch(m){case"TOKEN_SEND":{const e=f.balanceChanges[0],{token:{symbol:t,displayName:r,tokenType:o,decimals:s},amount:c}=e,p=g(e,a),h=y(o);let m="";if(!v&&void 0!==s&&!("NonFungible"===o)){const e=p?"+":"-";m=h?`${e}${(0,l.amountToFormattedAmount)(c,s)}`:`${e}${(0,l.amountToFormattedAmount)(c,s)}${t?` ${(0,u.truncateString)(t,6)}`:""}`}if(p){const t=(0,d.extractAddressfromBri)(e.from),o=(0,l.formatAddress)(t,void 0,i(t,S));return{topLeft:{label:`${n("transactionsReceived")} ${h?r||n("richTransactionDetailUnknownNFT"):""}`},topRight:{label:`${m}`,color:"#21E56F"},bottomLeft:{label:n("transactionsFromParagraphInterpolated",{from:o,defaultValue:`From ${o}`})},image:E}}{const t=(0,d.extractAddressfromBri)(e.to),o=(0,l.formatAddress)(t,void 0,i(t,S));return{topLeft:{label:v?n("transactionsSendFailed"):`${n("transactionsSent")} ${h?r||n("richTransactionDetailUnknownNFT"):""}`},topRight:{label:`${m}`,color:"#FFFFFF"},bottomLeft:{label:n("transactionsToParagraphInterpolated",{to:o,defaultValue:`To ${o}`})},image:E}}}case"TOKEN_BURN":{const{amount:e,token:t}=f;let r="";return r=t.displayName?"1"===e?t.displayName:`${t.displayName} (${e})`:n("richTransactionDetailUnknownNFT"),{topLeft:{label:v?`${n("transactionsFailedBurn")}`:`${n("transactionsBurned")}`},bottomLeft:{label:r},image:E}}case"TOKEN_UNWRAP":{const{amount:e,token:t}=f;return{topLeft:{label:v?`${n("transactionsUnwrappedFailed")}`:`${n("transactionsUnwrapped")}`},topRight:{label:v?"":`${(0,l.amountToFormattedAmount)(e,null!==(p=t.decimals)&&void 0!==p?p:0)} ${t.symbol}`,color:"#FFFFFF"},image:E}}case"TOKEN_SWAP":{const{receiveAmount:e,receiveToken:t,sendAmount:r,sendToken:o,dapp:i}=f,s=i?i.displayName:n("historyUnknownDappName"),a=(0,l.formatAddressShort)((0,d.extractAddressfromBri)(o.id)||""),c=(0,l.formatAddressShort)((0,d.extractAddressfromBri)(t.id)||"");let p="";v||void 0===t.decimals||(p=`+${(0,l.amountToFormattedAmount)(e,t.decimals)} ${(0,u.truncateString)(t.symbol||c,6)}`);let h="";return v||void 0===o.decimals||(h=`-${(0,l.amountToFormattedAmount)(r,o.decimals)} ${(0,u.truncateString)(o.symbol||a,6)}`),{topLeft:{label:n(v?"transactionsFailedSwap":"transactionsSwapped")},topRight:{label:p,color:"#21E56F"},bottomLeft:{label:s},bottomRight:{label:h,color:"#FFFFFF"},image:E}}case"BRIDGE_INIT":{const e=f.dapp?f.dapp.displayName:w,t=f.balanceChanges[0],{token:{symbol:r,decimals:o},amount:i}=t,s=r?` ${(0,u.truncateString)(r,6)}`:"";if(!v&&void 0!==o){const t=`-${(0,l.amountToFormattedAmount)(i,o)}${s}`;return{topLeft:{label:v?n("transactionBridgeInitiatedFailed"):`${n("transactionBridgeInitiated")}`},bottomLeft:{label:e},topRight:{label:`${t}`,color:"#FFFFFF"},image:E}}return{topLeft:{label:v?n("transactionBridgeInitiatedFailed"):`${n("transactionBridgeInitiated")}`},bottomLeft:{label:e},image:E}}case"WITHDRAW_STAKE":{const{amount:e,stakeAccount:t}=f,r=(0,d.extractAddressfromBri)(t),i=o.Chains.getTokenSymbol(S);return{topLeft:{label:n(v?"transactionsWithdrawStakeFailed":"transactionsWithdrawStake")},topRight:{label:v?"":`${(0,l.amountToFormattedAmount)(e,s.NATIVE_TOKEN_MAP[S].decimals)} ${(0,u.truncateString)(i,6)}`,color:"#FFFFFF"},bottomLeft:{label:(0,l.formatHashMedium)(r,4)},image:E}}case"DEACTIVATE_STAKE":{const{stakeAccount:e}=f,t=(0,d.extractAddressfromBri)(e);return{topLeft:{label:n(v?"transactionsDeactivateStakeFailed":"transactionsDeactivateStake")},bottomLeft:{label:(0,l.formatHashMedium)(t,4)},image:E}}case"STAKE":{const{amount:e,stakeAccount:t,validatorName:r}=f,o=(0,d.extractAddressfromBri)(t);return{topLeft:{label:n(v?"transactionsStakedFailed":"transactionsStaked")},topRight:{label:v?"":`${(0,l.amountToFormattedAmount)(e,s.NATIVE_TOKEN_MAP[S].decimals)} ${(0,u.truncateString)(b,6)}`,color:"#FFFFFF"},bottomLeft:{label:r||(0,l.formatHashMedium)(o,4)},image:E}}case"COLLECTIBLE_LIST":{const{dapp:e,item:t}=f,r=e?e.displayName:n("historyUnknownDappName"),o=t.displayName||n("richTransactionDetailUnknownNFT");return{topLeft:{label:v?n("transactionsListedFailed"):n("transactionsListedInterpolated",{name:o})},bottomLeft:{label:r},image:E}}case"COLLECTIBLE_BUY_ITEM":{const{dapp:e,itemAmount:t,item:r,forAsset:o,forAmount:i}=f,s=e?e.displayName:n("historyUnknownDappName"),a=void 0!==o.decimals?`-${(0,l.amountToFormattedAmount)(i,o.decimals)} ${(0,u.truncateString)(o.symbol||"",6)}`:n("transactionsUnknownAmount"),c=r.symbol||(0,l.formatAddressShort)((0,d.extractAddressfromBri)(r.id)),p=t&&"SemiFungible"===r.tokenType?`+${t} ${c}`:`+${c}`;return{topLeft:{label:n(v?"transactionsBuyFailed":"transactionsBoughtCollectible")},topRight:{label:v?"":p,color:"#21E56F"},bottomRight:{label:v?"":`${a}`,color:"#FFFFFF"},bottomLeft:{label:s},image:E}}case"COLLECTIBLE_CANCEL_BID":{const{dapp:e,item:t}=f,r=e?e.displayName:n("historyUnknownDappName"),o=t.displayName||n("richTransactionDetailUnknownNFT");return{topLeft:{label:v?n("transactionsCancelBidOnFailed"):n("transactionsCancelBidOnInterpolated",{name:o})},bottomLeft:{label:r},image:E}}case"COLLECTIBLE_BID_ITEM":{const{dapp:e,item:t}=f,r=e?e.displayName:n("historyUnknownDappName"),o=t.displayName||n("richTransactionDetailUnknownNFT");return{topLeft:{label:v?n("transactionsBidFailed"):n("transactionsBidOnInterpolated",{name:o})},bottomLeft:{label:r},image:E}}case"COLLECTIBLE_UNLIST":{const{dapp:e,item:t}=f,r=e?e.displayName:n("historyUnknownDappName"),o=t.displayName||n("richTransactionDetailUnknownNFT");return{topLeft:{label:v?n("transactionsUnlistedFailed"):n("transactionsUnlistedInterpolated",{name:o})},bottomLeft:{label:r},image:E}}case"COLLECTIBLE_SELL_ITEM":{const{dapp:e,itemAmount:t,item:r,forAsset:o,forAmount:i}=f,s=e?e.displayName:n("historyUnknownDappName"),a=void 0!==o.decimals?`+${(0,l.amountToFormattedAmount)(i,o.decimals)} ${(0,u.truncateString)(o.symbol||"",6)}`:n("transactionsUnknownAmount"),c=r.symbol||(0,l.formatAddressShort)((0,d.extractAddressfromBri)(r.id)),p=t&&"SemiFungible"===r.tokenType?`-${t} ${c}`:`-${c}`;return{topLeft:{label:n(v?"transactionsSoldFailed":"transactionsSoldCollectible")},topRight:{label:v?"":`${a}`,color:"#21E56F"},bottomRight:{label:v?"":p,color:"#FFFFFF"},bottomLeft:{label:s},image:E}}case"CANCEL_TX":return{topLeft:{label:n(v?"transactionCancelledFailed":"transactionCancelled")},image:E};case"TOKEN_APPROVAL":{const{dapp:e,token:t,isApproved:r}=f,o=y(t.tokenType)?t.displayName:t.symbol;let i;return i=v?r?y(t.tokenType)?n("transactionApproveTokenFailed",{tokenSymbol:o}):n("transactionApprovalFailed"):y(t.tokenType)?n("transactionRevokeApproveTokenFailed",{tokenSymbol:o}):n("transactionRevokeFailed"):n(r?"transactionApproveToken":"transactionRevokeApproveToken",{tokenSymbol:o}),{topLeft:{label:i},bottomLeft:{label:e?e.displayName:w,color:"#777"},image:E}}case"COLLECTION_APPROVAL":{const{collection:e,isApproved:t,dapp:r}=f,o=e.displayName;let i;return i=n(v?t?"transactionApproveTokenFailed":"transactionRevokeApproveTokenFailed":t?"transactionApproveToken":"transactionRevokeApproveToken",{tokenSymbol:o}),{topLeft:{label:i},bottomLeft:{label:r?r.displayName:w,color:"#777"},image:E}}case"CANCEL_ORDER":{const{dapp:e}=f;return{topLeft:{label:n(v?"transactionCancelOrderFailed":"transactionCancelOrder")},bottomLeft:{label:(null==e?void 0:e.displayName)||n("historyUnknownDappName"),color:"#777"},image:E}}case"UNCLASSIFIED_APP_INTERACTION":{const{dapp:e}=f,t=e?e.displayName:w;return{topLeft:{label:n(v?"transactionsFailedAppInteraction":"transactionsAppInteraction")},bottomLeft:{label:t},image:E}}}},f=(e,n)=>{const{display:r,type:o}=e,{topLeft:i,topRight:s,bottomLeft:a,bottomRight:u}=r.summary;return{topLeft:i,topRight:s,bottomLeft:a,bottomRight:u,image:t(c).createElement(n,{logoUri:r.summary.logoUri,pendingTransactionType:o,size:"small"})}},h=(e,t,n)=>{var r;let o=(null!=e?e:[]).map(a.toAccount);if(t){const e=null===(r=o.find((e=>e.chainId===t)))||void 0===r?void 0:r.address;if(e){const r={chainId:t,address:e};n&&(r.filters=[{type:"token",value:n}]),o=[r]}}return o},y=e=>{switch(e){case"SemiFungible":case"NonFungible":return!0;default:return!1}},m=(e,t)=>{const{interactionData:n}=e;if("TOKEN_SEND"===n.transactionType){const e=n.balanceChanges[0],r=e.token;return g(e,t)&&!!r.isSpam}return!1},g=(e,t)=>{const n=(0,d.extractAddressfromBri)(e.to),r=(0,d.extractAddressfromBri)(e.from),o=t.some((e=>e.address.toLowerCase()===n.toLowerCase())),i=t.some((e=>e.address.toLowerCase()===r.toLowerCase()));return o&&!i}}))}();
//# sourceMappingURL=multichainMigration.c292ee59.js.map
define=__define;})(window.define);